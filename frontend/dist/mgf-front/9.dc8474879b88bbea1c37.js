(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0Sq8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),r=function(){function t(){}return t.prototype.transform=function(t){if(t)return t>100?[5,10,25,50,t]:[5,10,25,50]},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Mb({name:"tableOptions",type:t,pure:!0}),t}()},"8THJ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("I/UU"),r=n("fXoL"),o=n("ofXK"),a=n("Xa2L");function c(t,e){if(1&t&&(r.Tb(0,"div",2),r.Ob(1,"mat-spinner",3),r.Sb()),2&t){var n=r.ic();r.Ab(1),r.pc("diameter",n.diameter)}}function s(t,e){1&t&&(r.Tb(0,"div",4),r.Jc(1," Une erreur est survenue lors du chargement, merci de r\xe9essayer plus tard!!!\n"),r.Sb())}var u=function(){function t(t){this.httpState=t,this.isLoading=!1,this.isError=!1,this.filterBy=null,this.diameter=40,this.display=!0,this.loadingEvent$=new r.o}return t.prototype.ngOnInit=function(){var t=this;this.httpState.state.subscribe((function(e){e&&e.url&&(t.filterBy?-1!==e.url.indexOf(t.filterBy)&&(t.isLoading=e.state===i.a.start,t.isError=e.isError):(t.isLoading=e.state===i.a.start,t.isError=e.isError),t.loadingEvent$.emit(t.isLoading))}))},t.\u0275fac=function(e){return new(e||t)(r.Nb(i.b))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-spinner"]],inputs:{filterBy:"filterBy",diameter:"diameter",display:"display"},outputs:{loadingEvent$:"loadingEvent$"},decls:2,vars:2,consts:[["class","spinner-center",4,"ngIf"],["class","spinner-center text-danger font-italic",4,"ngIf"],[1,"spinner-center"],[3,"diameter"],[1,"spinner-center","text-danger","font-italic"]],template:function(t,e){1&t&&(r.Hc(0,c,2,1,"div",0),r.Hc(1,s,2,0,"div",1)),2&t&&(r.pc("ngIf",e.isLoading&&e.display),r.Ab(1),r.pc("ngIf",e.isError&&e.display))},directives:[o.m,a.b],styles:[".loading[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}"]}),t}()},c48k:function(t,e,n){"use strict";n.r(e),n.d(e,"GestionProduitModule",(function(){return Ut}));var i=n("ofXK"),r=n("1kSV"),o=n("tyNb"),a=n("p+2o"),c=n("fXoL"),s=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-gestion-produit"]],decls:2,vars:0,consts:[[1,"main-content"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Ob(1,"router-outlet"),c.Sb())},directives:[o.j],styles:[""]}),t}(),u=n("3Pt+"),l=n("M9IT"),p=n("Dh3D"),b=n("+0xr"),d=n("6vGg"),f=n("d414"),m=n("2Vo4"),h=n("0z96"),g=n("Edwt"),S=n("9qFf"),v=n("D7GG"),y=n("bTqV"),T=n("NFeN"),w=n("8THJ"),N=n("kmnG"),I=n("qFsG"),A=n("0Sq8"),k=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function C(t,e){1&t&&(c.Tb(0,"button",13),c.Tb(1,"mat-icon"),c.Jc(2,"add"),c.Sb(),c.Sb())}function x(t,e){1&t&&(c.Tb(0,"mat-header-cell",32),c.Tb(1,"strong"),c.Jc(2,"NOM PRODUIT"),c.Sb(),c.Sb())}function P(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.nom)}}function O(t,e){1&t&&(c.Tb(0,"mat-header-cell",32),c.Tb(1,"strong"),c.Jc(2,"PRIX UNITAIRE"),c.Sb(),c.Sb())}function E(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.prixUnit)}}function D(t,e){1&t&&(c.Tb(0,"mat-header-cell",32),c.Tb(1,"strong"),c.Jc(2,"MARQUE"),c.Sb(),c.Sb())}function _(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.groupement.marque)}}function J(t,e){1&t&&(c.Tb(0,"mat-header-cell",32),c.Tb(1,"strong"),c.Jc(2,"POIDS"),c.Sb(),c.Sb())}function R(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.poids)}}function H(t,e){1&t&&(c.Tb(0,"mat-header-cell",32),c.Tb(1,"strong"),c.Jc(2,"GROUPEMENT"),c.Sb(),c.Sb())}function L(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.groupement.nom)}}function F(t,e){1&t&&(c.Tb(0,"mat-header-cell",32),c.Tb(1,"strong"),c.Jc(2,"DESCRIPTION"),c.Sb(),c.Sb())}function U(t,e){if(1&t&&(c.Tb(0,"div"),c.Jc(1),c.Sb()),2&t){var n=c.ic().$implicit;c.Ab(1),c.Lc(" ",n.description," ")}}function z(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div"),c.Jc(1),c.Tb(2,"button",33),c.ec("click",(function(){c.zc(n);var t=c.ic().$implicit,e=c.ic(3),i=c.xc(16);return e.openModalDescription(i,t.description)})),c.Jc(3," Voir plus "),c.Sb(),c.Sb()}if(2&t){var i=c.ic().$implicit,r=c.ic(3);c.Ab(1),c.Lc(" ",i.description.substr(0,r.maxDescriptionLength)+"..."," ")}}function $(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Hc(1,U,2,1,"div",11),c.Hc(2,z,4,1,"div",11),c.Sb()),2&t){var n=e.$implicit,i=c.ic(3);c.Ab(1),c.pc("ngIf",i.maxDescriptionLength>n.description.length),c.Ab(1),c.pc("ngIf",n.description.length>i.maxDescriptionLength)}}function j(t,e){1&t&&(c.Tb(0,"mat-header-cell",32),c.Tb(1,"strong"),c.Jc(2,"OPTIONS"),c.Sb(),c.Sb())}var M=function(t){return{id:t}},q=function(t){return["edit",t]};function V(t,e){if(1&t&&(c.Tb(0,"button",36),c.Tb(1,"mat-icon"),c.Jc(2,"edit"),c.Sb(),c.Sb()),2&t){var n=c.ic().$implicit;c.pc("routerLink",c.tc(3,q,c.tc(1,M,n.id)))}}function G(t,e){if(1&t){var n=c.Ub();c.Tb(0,"button",37),c.ec("click",(function(){c.zc(n);var t=c.ic().$implicit;return c.ic(3).onDelete(t.id)})),c.Tb(1,"mat-icon"),c.Jc(2,"delete"),c.Sb(),c.Sb()}}function B(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Hc(1,V,3,5,"button",34),c.Hc(2,G,3,0,"button",35),c.Sb()),2&t){var n=c.ic(3);c.Ab(1),c.pc("ngIf",n.permissions.can_edit),c.Ab(1),c.pc("ngIf",n.permissions.can_delete)}}function K(t,e){1&t&&c.Ob(0,"mat-header-row")}function Q(t,e){1&t&&c.Ob(0,"mat-row")}function X(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div"),c.Tb(1,"div",15),c.Tb(2,"div",16),c.Tb(3,"mat-form-field"),c.Tb(4,"input",17),c.ec("keyup",(function(t){return c.zc(n),c.ic(2).applyFilter(t.target.value)})),c.Sb(),c.Sb(),c.Sb(),c.Tb(5,"mat-table",18),c.Rb(6,19),c.Hc(7,x,3,0,"mat-header-cell",20),c.Hc(8,P,2,1,"mat-cell",21),c.Qb(),c.Rb(9,22),c.Hc(10,O,3,0,"mat-header-cell",20),c.Hc(11,E,2,1,"mat-cell",21),c.Qb(),c.Rb(12,23),c.Hc(13,D,3,0,"mat-header-cell",20),c.Hc(14,_,2,1,"mat-cell",21),c.Qb(),c.Rb(15,24),c.Hc(16,J,3,0,"mat-header-cell",20),c.Hc(17,R,2,1,"mat-cell",21),c.Qb(),c.Rb(18,25),c.Hc(19,H,3,0,"mat-header-cell",20),c.Hc(20,L,2,1,"mat-cell",21),c.Qb(),c.Rb(21,26),c.Hc(22,F,3,0,"mat-header-cell",20),c.Hc(23,$,3,2,"mat-cell",21),c.Qb(),c.Rb(24,27),c.Hc(25,j,3,0,"mat-header-cell",20),c.Hc(26,B,3,2,"mat-cell",21),c.Qb(),c.Hc(27,K,1,0,"mat-header-row",28),c.Hc(28,Q,1,0,"mat-row",29),c.Sb(),c.Tb(29,"mat-paginator",30,31),c.ec("page",(function(t){return c.zc(n),c.ic(2).pageChanged(t)})),c.jc(31,"tableOptions"),c.Sb(),c.Sb(),c.Sb()}if(2&t){var i=c.ic(2);c.Ab(1),c.pc("hidden",!i.dataSource||0===i.dataSource.data.length),c.Ab(4),c.pc("dataSource",i.dataSource),c.Ab(22),c.pc("matHeaderRowDef",i.displayedColumns),c.Ab(1),c.pc("matRowDefColumns",i.displayedColumns),c.Ab(1),c.pc("length",i.totalRows)("pageIndex",i.currentPage)("pageSize",i.pageSize)("pageSizeOptions",c.kc(31,8,i.dataSource.data.length))}}function W(t,e){1&t&&(c.Tb(0,"div",38),c.Jc(1," Aucun cas trouv\xe9 !!! "),c.Sb())}function Y(t,e){if(1&t&&(c.Tb(0,"div"),c.Hc(1,X,32,10,"div",11),c.Hc(2,W,2,0,"div",14),c.jc(3,"async"),c.Sb()),2&t){var n=c.ic();c.Ab(1),c.pc("ngIf",n.dataSource.data.length>0),c.Ab(1),c.pc("ngIf",0===n.dataSource.data.length&&!1===c.kc(3,2,n.spinner.loadingEvent$))}}function Z(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div",39),c.Tb(1,"span",40),c.Jc(2,"Description"),c.Sb(),c.Sb(),c.Tb(3,"div",41),c.Tb(4,"p",42),c.Jc(5),c.Sb(),c.Sb(),c.Tb(6,"div",43),c.Tb(7,"button",44),c.ec("click",(function(){return c.zc(n),c.ic().onCloseModal()})),c.Jc(8," Fermer "),c.Sb(),c.Sb()}if(2&t){var i=c.ic();c.Ab(5),c.Kc(i.description)}}var tt=function(){function t(t,e,n,i,r,o,a){this.parametrageService=t,this.gestionProduitService=e,this.auth=n,this.utils=i,this.fb=r,this.modalService=o,this.cdrf=a,this.subject=new m.a(0),this.pageSize=10,this.currentPage=0,this.totalRows=0,this.permissions={can_add:!1,can_edit:!1,can_delete:!1,can_view_info:!1},this.produitUrl=h.c,this.produitId=0,this.messageAttente="",this.maxDescriptionLength=40,this.showFullDescription=!1,this.description="",this.displayedColumns=["nom","prixUnit","marque","poids","groupement","description","option"],this.dataSource=new b.k([])}return t.prototype.getElement=function(t){return void 0===t&&(t={page:this.currentPage,size:this.pageSize}),e=this,void 0,i=function(){var e=this;return function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(c){o=[6,c],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(n){return this.gestionProduitService.getAllProduits(t).subscribe((function(t){var n=t.data.map((function(n){return e.totalRows=t.totalItem,{id:n.id,nom:n.nom,poids:n.poids,prixUnit:n.prixUnit,description:n.description,marque:n.groupement.marque,groupement:n.groupement}}),(function(t){console.log("error: ",t)}));e.dataSource.data=n,setTimeout((function(){e.paginator.length=e.totalRows})),e.dataSource._updateChangeSubscription(),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort})),[2]}))},new((n=void 0)||(n=Promise))((function(t,r){function o(t){try{c(i.next(t))}catch(e){r(e)}}function a(t){try{c(i.throw(t))}catch(e){r(e)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(o,a)}c((i=i.apply(e,[])).next())}));var e,n,i},t.prototype.ngAfterViewInit=function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},t.prototype.ngAfterContentChecked=function(){this.cdrf.detectChanges()},t.prototype.ngOnInit=function(){this.setPermissions(),this.getElement(),this.reinitialisationForm=this.fb.group({mode:["",[u.u.required]]})},t.prototype.onRefresh=function(){this.dataSource.data=[],this.getElement()},t.prototype.onDelete=function(t){var e=this;this.gestionProduitService.deleteProduit(t).subscribe((function(){e.utils.showNotif("Utilisateur supprim\xe9 avec succ\xe8s ","success"),e.onRefresh()}),(function(t){e.utils.showNotif("Une erreur est survenue lors de l'operation "+t,"danger")}))},t.prototype.setPermissions=function(){var t=this.auth.getPermissions();this.permissions={can_add:t.includes(d.c.CAN_ADD_PRODUIT),can_edit:t.includes(d.c.CAN_UPDATE_PRODUIT),can_delete:t.includes(d.c.CAN_DELETE_PRODUIT),can_view_info:t.includes(d.c.CAN_DELETE_PRODUIT)}},t.prototype.openModalDescription=function(t,e){this.description=e,this.modalRef=this.modalService.open(t,{backdrop:"static",size:"lg"})},t.prototype.toggleDescription=function(){this.showFullDescription=!this.showFullDescription},t.prototype.onCloseModal=function(){this.modalRef.close()},t.prototype.applyFilter=function(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t},t.prototype.onSearch=function(t){t&&(t.page=0,t.size=10,this.getElement(t))},t.prototype.pageChanged=function(t){console.log({event:t}),this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.totalRows=t.length,this.getElement({page:this.currentPage,size:this.pageSize})},t.\u0275fac=function(e){return new(e||t)(c.Nb(g.b),c.Nb(h.b),c.Nb(S.a),c.Nb(v.a),c.Nb(u.c),c.Nb(r.a),c.Nb(c.h))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-list-produit"]],viewQuery:function(t,e){var n;1&t&&(c.Nc(l.a,!0),c.Nc(p.a,!0)),2&t&&(c.wc(n=c.fc())&&(e.paginator=n.first),c.wc(n=c.fc())&&(e.sort=n.first))},decls:17,vars:3,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-8"],[1,"card-title","text-white"],[1,"nc-icon","nc-single-02"],[1,"col-sm-4","text-right","mt-2"],["mat-raised-button","","routerLink","edit","class","mr-1","color","info",4,"ngIf"],["mat-raised-button","","color","info",3,"click"],[1,"card-body"],[3,"filterBy"],[4,"ngIf"],["modalDescription",""],["mat-raised-button","","routerLink","edit","color","info",1,"mr-1"],["class","text-info text-center mt-2",4,"ngIf"],[1,"table-responsive","mb-2",3,"hidden"],[1,"mat-table-header"],["matInput","","placeholder","Rechercher",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","nom"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","prixUnit"],["matColumnDef","marque"],["matColumnDef","poids"],["matColumnDef","groupement"],["matColumnDef","description"],["matColumnDef","option"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-sort-header",""],["mat-button","","color","primary",3,"click"],["mat-mini-fab","","color","info",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click",4,"ngIf"],["mat-mini-fab","","color","info",3,"routerLink"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click"],[1,"text-info","text-center","mt-2"],[1,"modal-header","bg-default"],[1,"modal-title","h4","text-white"],[1,"modal-body"],[1,"text-center","font-italic"],[1,"text-center"],["type","button","color","info",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"h2",4),c.Ob(5,"i",5),c.Jc(6," Liste des produits "),c.Sb(),c.Sb(),c.Tb(7,"div",6),c.Hc(8,C,3,0,"button",7),c.Tb(9,"button",8),c.ec("click",(function(){return e.onRefresh()})),c.Tb(10,"mat-icon"),c.Jc(11,"refresh"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(12,"div",9),c.Ob(13,"app-spinner",10),c.Hc(14,Y,4,4,"div",11),c.Sb(),c.Sb(),c.Hc(15,Z,9,1,"ng-template",null,12,c.Ic)),2&t&&(c.Ab(8),c.pc("ngIf",e.permissions.can_add),c.Ab(5),c.pc("filterBy",e.produitUrl),c.Ab(1),c.pc("ngIf",e.dataSource.data.length))},directives:[i.m,y.a,T.a,w.a,o.f,N.c,I.a,b.j,p.a,b.c,b.e,b.b,b.g,b.i,l.a,b.d,p.b,b.a,b.f,b.h],pipes:[i.b,A.a],styles:[""]}),function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([Object(f.a)({html:"Voulez-vous supprimer cet utilisateur ?",icon:"warning"}),k("design:type",Function),k("design:paramtypes",[Number]),k("design:returntype",void 0)],t.prototype,"onDelete",null),t}(),et=n("dNgK"),nt=n("d3UM"),it=n("FKr1"),rt=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{s(i.next(t))}catch(e){o(e)}}function c(t){try{s(i.throw(t))}catch(e){o(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((i=i.apply(t,e||[])).next())}))},ot=function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(c){o=[6,c],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function at(t,e){if(1&t&&(c.Tb(0,"mat-option",21),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.pc("value",n),c.Ab(1),c.Lc("",n," Kg")}}function ct(t,e){if(1&t&&(c.Tb(0,"mat-option",21),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.pc("value",n.id),c.Ab(1),c.Kc(n.nom)}}var st=function(){function t(t,e,n,i,r,o,a,c){this.fb=t,this.route=e,this.router=n,this.parametrageService=i,this.gestionProduitService=r,this.utils=o,this.snackBar=a,this.modalService=c,this.isNew=!0,this.produitId=0,this.poids=[1,2,5,10],this.produitUrl=h.c,this.description=d.a}return t.prototype.ngOnInit=function(){this.produitId=this.route.snapshot.params.id,this.isNew=isNaN(this.produitId),this.groupements$=this.parametrageService.getGroupements(),this.categories$=this.parametrageService.getAllCategories(),this.initForm(),this.onEdit()},t.prototype.initForm=function(){this.produitForm=this.fb.group({nom:["",[u.u.required,u.u.minLength(2)]],poids:["",[u.u.required,u.u.pattern(d.e)]],prixUnit:["",[u.u.required,u.u.pattern(d.e)]],description:["",[u.u.required,u.u.minLength(d.a)]],groupement:this.fb.group({id:[null,[u.u.required,u.u.pattern(d.e)]]})})},t.prototype.resetForm=function(){this.initForm(),this.produitForm.markAsPristine(),this.produitForm.markAsUntouched(),this.produitForm.updateValueAndValidity()},t.prototype.onSubmit=function(){return rt(this,void 0,void 0,(function(){var t,e,n=this;return ot(this,(function(i){switch(i.label){case 0:return this.produitForm.invalid?[3,2]:(e=t=this.produitForm.value,[4,this.parametrageService.getOneGroupement(t.groupement.id).toPromise()]);case 1:e.groupement=i.sent(),(this.isNew?this.gestionProduitService.addProduit(t):this.gestionProduitService.updateProduit(this.produitId,t)).subscribe((function(){n.utils.showNotif("Operation effectu\xe9e avec succ\xe8s","success"),n.isNew?n.resetForm():n.router.navigate(["gestion-produits/produits"])}),(function(t){n.utils.showNotif("Une erreur est survenue lors de l'op\xe9ration ","danger")})),i.label=2;case 2:return[2]}}))}))},t.prototype.mapProduit=function(){return rt(this,void 0,void 0,(function(){var t;return ot(this,(function(e){switch(e.label){case 0:return[4,this.gestionProduitService.getOneproduit(this.produitId).toPromise()];case 1:return t=e.sent(),this.produitForm.patchValue({nom:t.nom,poids:t.poids,prixUnit:t.prixUnit,description:t.description,groupement:{id:t.groupement.id}}),[2]}}))}))},t.prototype.onEdit=function(){!this.isNew&&this.produitId>0&&this.mapProduit()},t.\u0275fac=function(e){return new(e||t)(c.Nb(u.c),c.Nb(o.a),c.Nb(o.e),c.Nb(g.b),c.Nb(h.b),c.Nb(v.a),c.Nb(et.a),c.Nb(r.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-edit-produit"]],decls:66,vars:16,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-12","form-inline"],["mat-mini-fab","","color","info","routerLink",".."],[1,"card-title","ml-1","text-white"],[1,"card-body"],[3,"filterBy","diameter"],["usrSpinner",""],[1,"col-md-8","offset-md-2","col-sm-12"],[3,"formGroup"],[1,"col-12"],["matInput","","type","text","formControlName","nom"],["formControlName","poids"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","minlength","1","formControlName","prixUnit"],["matInput","","formControlName","description"],["formGroupName","groupement"],["formControlName","id"],[1,"text-center"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"button",4),c.Tb(5,"mat-icon"),c.Jc(6,"reply"),c.Sb(),c.Sb(),c.Tb(7,"h2",5),c.Jc(8),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(9,"div",6),c.Ob(10,"app-spinner",7,8),c.Tb(12,"div",2),c.Tb(13,"div",9),c.Tb(14,"div"),c.Tb(15,"form",10),c.Tb(16,"div",2),c.Tb(17,"div",11),c.Tb(18,"mat-form-field"),c.Tb(19,"mat-label"),c.Jc(20,"Nom Produit *"),c.Sb(),c.Ob(21,"input",12),c.Tb(22,"mat-error"),c.Jc(23,"La produit est obligatoire et contient au moins 3 caract\xe8res"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(24,"div"),c.Tb(25,"div",2),c.Tb(26,"div",11),c.Tb(27,"mat-form-field"),c.Tb(28,"mat-label"),c.Jc(29,"Poids *"),c.Sb(),c.Tb(30,"mat-select",13),c.Hc(31,at,2,2,"mat-option",14),c.Sb(),c.Tb(32,"mat-error"),c.Jc(33,"Le poids est obligatoire"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(34,"div",2),c.Tb(35,"div",11),c.Tb(36,"mat-form-field"),c.Tb(37,"mat-label"),c.Jc(38,"Prix Unitaire Produit *"),c.Sb(),c.Ob(39,"input",15),c.Tb(40,"mat-error"),c.Jc(41,"Le prix unitaire est obligatoire "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(42,"div",2),c.Tb(43,"div",11),c.Tb(44,"mat-form-field"),c.Tb(45,"mat-label"),c.Jc(46,"Description *"),c.Sb(),c.Ob(47,"textarea",16),c.Tb(48,"mat-error"),c.Jc(49),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(50,"div",17),c.Tb(51,"div",2),c.Tb(52,"div",11),c.Tb(53,"mat-form-field"),c.Tb(54,"mat-label"),c.Jc(55,"Groupement *"),c.Sb(),c.Tb(56,"mat-select",18),c.Hc(57,ct,2,2,"mat-option",14),c.jc(58,"async"),c.Sb(),c.Tb(59,"mat-error"),c.Jc(60,"Le groupement est obligatoire"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(61,"div",19),c.Tb(62,"button",20),c.ec("click",(function(){return e.onSubmit()})),c.jc(63,"async"),c.jc(64,"async"),c.Jc(65," Enregistrer "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.xc(11);c.Ab(8),c.Lc(" ",e.isNew?"Enregistrement d'un produit":"Modification d'un produit "," "),c.Ab(2),c.pc("filterBy",e.produitUrl)("diameter",30),c.Ab(5),c.pc("formGroup",e.produitForm),c.Ab(16),c.pc("ngForOf",e.poids),c.Ab(18),c.Lc("La description est obligatoire et contient au moins ",e.description," caract\xe8res"),c.Ab(8),c.pc("ngForOf",c.kc(58,10,e.groupements$)),c.Ab(5),c.Fb("spinner",c.kc(63,12,n.loadingEvent$)),c.pc("disabled",e.produitForm.invalid||c.kc(64,14,n.loadingEvent$))}},directives:[y.a,o.f,T.a,w.a,u.w,u.m,u.e,N.c,N.f,I.a,u.b,u.l,u.d,N.b,nt.a,i.l,u.q,u.h,u.f,it.j],pipes:[i.b],styles:['.mat-form-field[_ngcontent-%COMP%]{font-size:17px;width:100%}@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}']}),t}(),ut=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-info-produit"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Tb(0,"p"),c.Jc(1,"info-produit works!"),c.Sb())},styles:[""]}),t}(),lt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function pt(t,e){1&t&&(c.Tb(0,"button",12),c.Tb(1,"mat-icon"),c.Jc(2,"add"),c.Sb(),c.Sb())}function bt(t,e){1&t&&(c.Tb(0,"mat-header-cell",28),c.Tb(1,"strong"),c.Jc(2,"NOM"),c.Sb(),c.Sb())}function dt(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.nom)}}function ft(t,e){1&t&&(c.Tb(0,"mat-header-cell",28),c.Tb(1,"strong"),c.Jc(2,"PRENOMS"),c.Sb(),c.Sb())}function mt(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.prenom)}}function ht(t,e){1&t&&(c.Tb(0,"mat-header-cell",28),c.Tb(1,"strong"),c.Jc(2,"TELEPHONE"),c.Sb(),c.Sb())}function gt(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.telephone)}}function St(t,e){1&t&&(c.Tb(0,"mat-header-cell",28),c.Tb(1,"strong"),c.Jc(2,"ADRESSE"),c.Sb(),c.Sb())}function vt(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Jc(1),c.Sb()),2&t){var n=e.$implicit;c.Ab(1),c.Kc(n.adresse)}}function yt(t,e){1&t&&(c.Tb(0,"mat-header-cell",28),c.Tb(1,"strong"),c.Jc(2,"OPTIONS"),c.Sb(),c.Sb())}var Tt=function(t){return{id:t}},wt=function(t){return["edit",t]};function Nt(t,e){if(1&t&&(c.Tb(0,"button",31),c.Tb(1,"mat-icon"),c.Jc(2,"edit"),c.Sb(),c.Sb()),2&t){var n=c.ic().$implicit;c.pc("routerLink",c.tc(3,wt,c.tc(1,Tt,n.id)))}}function It(t,e){if(1&t){var n=c.Ub();c.Tb(0,"button",32),c.ec("click",(function(){c.zc(n);var t=c.ic().$implicit;return c.ic(3).onDelete(t.id)})),c.Tb(1,"mat-icon"),c.Jc(2,"delete"),c.Sb(),c.Sb()}}function At(t,e){if(1&t&&(c.Tb(0,"mat-cell"),c.Hc(1,Nt,3,5,"button",29),c.Hc(2,It,3,0,"button",30),c.Sb()),2&t){var n=c.ic(3);c.Ab(1),c.pc("ngIf",n.permissions.can_edit),c.Ab(1),c.pc("ngIf",n.permissions.can_delete)}}function kt(t,e){1&t&&c.Ob(0,"mat-header-row")}function Ct(t,e){1&t&&c.Ob(0,"mat-row")}function xt(t,e){if(1&t){var n=c.Ub();c.Tb(0,"div"),c.Tb(1,"div",13),c.Tb(2,"div",14),c.Tb(3,"mat-form-field"),c.Tb(4,"input",15),c.ec("keyup",(function(t){return c.zc(n),c.ic(2).applyFilter(t.target.value)})),c.Sb(),c.Sb(),c.Sb(),c.Tb(5,"mat-table",16),c.Rb(6,17),c.Hc(7,bt,3,0,"mat-header-cell",18),c.Hc(8,dt,2,1,"mat-cell",19),c.Qb(),c.Rb(9,20),c.Hc(10,ft,3,0,"mat-header-cell",18),c.Hc(11,mt,2,1,"mat-cell",19),c.Qb(),c.Rb(12,21),c.Hc(13,ht,3,0,"mat-header-cell",18),c.Hc(14,gt,2,1,"mat-cell",19),c.Qb(),c.Rb(15,22),c.Hc(16,St,3,0,"mat-header-cell",18),c.Hc(17,vt,2,1,"mat-cell",19),c.Qb(),c.Rb(18,23),c.Hc(19,yt,3,0,"mat-header-cell",18),c.Hc(20,At,3,2,"mat-cell",19),c.Qb(),c.Hc(21,kt,1,0,"mat-header-row",24),c.Hc(22,Ct,1,0,"mat-row",25),c.Sb(),c.Tb(23,"mat-paginator",26,27),c.ec("page",(function(t){return c.zc(n),c.ic(2).pageChanged(t)})),c.jc(25,"tableOptions"),c.Sb(),c.Sb(),c.Sb()}if(2&t){var i=c.ic(2);c.Ab(1),c.pc("hidden",!i.dataSource||0===i.dataSource.data.length),c.Ab(4),c.pc("dataSource",i.dataSource),c.Ab(16),c.pc("matHeaderRowDef",i.displayedColumns),c.Ab(1),c.pc("matRowDefColumns",i.displayedColumns),c.Ab(1),c.pc("length",i.totalRows)("pageIndex",i.currentPage)("pageSize",i.pageSize)("pageSizeOptions",c.kc(25,8,i.dataSource.data.length))}}function Pt(t,e){if(1&t&&(c.Tb(0,"div"),c.Hc(1,xt,26,10,"div",11),c.Sb()),2&t){var n=c.ic();c.Ab(1),c.pc("ngIf",n.dataSource.data.length>0)}}var Ot=function(){function t(t,e,n,i,r,o){this.gestionProduitService=t,this.auth=e,this.utils=n,this.fb=i,this.modalService=r,this.cdrf=o,this.subject=new m.a(0),this.pageSize=10,this.currentPage=0,this.totalRows=0,this.permissions={can_add:!1,can_edit:!1,can_delete:!1,can_view_info:!1},this.clientUrl=h.a,this.clientId=0,this.messageAttente="",this.displayedColumns=["nom","prenom","telephone","adresse","option"],this.dataSource=new b.k([])}return t.prototype.getElement=function(t){return void 0===t&&(t={page:this.currentPage,size:this.pageSize}),e=this,void 0,i=function(){var e=this;return function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(c){o=[6,c],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(n){return this.gestionProduitService.getAllClients(t).subscribe((function(t){var n=t.data.map((function(n){return e.totalRows=t.totalItem,{id:n.id,nom:n.nom,prenom:n.prenom,telephone:n.telephone,adresse:n.adresse}}),(function(t){console.log("error: ",t)}));e.dataSource.data=n,setTimeout((function(){})),e.dataSource._updateChangeSubscription(),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort})),[2]}))},new((n=void 0)||(n=Promise))((function(t,r){function o(t){try{c(i.next(t))}catch(e){r(e)}}function a(t){try{c(i.throw(t))}catch(e){r(e)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(o,a)}c((i=i.apply(e,[])).next())}));var e,n,i},t.prototype.ngAfterViewInit=function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},t.prototype.ngAfterContentChecked=function(){this.cdrf.detectChanges()},t.prototype.ngOnInit=function(){this.setPermissions(),this.getElement()},t.prototype.onRefresh=function(){this.dataSource.data=[],this.getElement()},t.prototype.onDelete=function(t){var e=this;this.gestionProduitService.deleteClient(t).subscribe((function(){e.utils.showNotif("Client supprim\xe9 avec succ\xe8s ","success"),e.onRefresh()}),(function(t){e.utils.showNotif("Une erreur est survenue lors de l'operation "+t,"danger")}))},t.prototype.setPermissions=function(){var t=this.auth.getPermissions();this.permissions={can_add:t.includes(d.c.CAN_ADD_CLIENT),can_edit:t.includes(d.c.CAN_UPDATE_CLIENT),can_delete:t.includes(d.c.CAN_DELETE_CLIENT),can_view_info:t.includes(d.c.CAN_DELETE_CLIENT)}},t.prototype.openModalReinitialisationPassword=function(t,e){this.clientId=e.id,this.modalRef=this.modalService.open(t,{backdrop:"static"})},t.prototype.onCloseModal=function(){this.modalRef.close()},t.prototype.applyFilter=function(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t},t.prototype.onSearch=function(t){t&&(t.page=0,t.size=10,this.getElement(t))},t.prototype.pageChanged=function(t){console.log({event:t}),this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.totalRows=t.length,this.getElement({page:this.currentPage,size:this.pageSize})},t.\u0275fac=function(e){return new(e||t)(c.Nb(h.b),c.Nb(S.a),c.Nb(v.a),c.Nb(u.c),c.Nb(r.a),c.Nb(c.h))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-list-client"]],viewQuery:function(t,e){var n;1&t&&(c.Nc(l.a,!0),c.Nc(p.a,!0)),2&t&&(c.wc(n=c.fc())&&(e.paginator=n.first),c.wc(n=c.fc())&&(e.sort=n.first))},decls:15,vars:3,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-8"],[1,"card-title","text-white"],[1,"nc-icon","nc-single-02"],[1,"col-sm-4","text-right","mt-2"],["mat-raised-button","","routerLink","edit","class","mr-1","color","info",4,"ngIf"],["mat-raised-button","","color","info",3,"click"],[1,"card-body"],[3,"filterBy"],[4,"ngIf"],["mat-raised-button","","routerLink","edit","color","info",1,"mr-1"],[1,"table-responsive","mb-2",3,"hidden"],[1,"mat-table-header"],["matInput","","placeholder","Rechercher",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","nom"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","prenom"],["matColumnDef","telephone"],["matColumnDef","adresse"],["matColumnDef","option"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-sort-header",""],["mat-mini-fab","","color","info",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click",4,"ngIf"],["mat-mini-fab","","color","info",3,"routerLink"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"h2",4),c.Ob(5,"i",5),c.Jc(6," Liste des clients "),c.Sb(),c.Sb(),c.Tb(7,"div",6),c.Hc(8,pt,3,0,"button",7),c.Tb(9,"button",8),c.ec("click",(function(){return e.onRefresh()})),c.Tb(10,"mat-icon"),c.Jc(11,"refresh"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(12,"div",9),c.Ob(13,"app-spinner",10),c.Hc(14,Pt,2,1,"div",11),c.Sb(),c.Sb()),2&t&&(c.Ab(8),c.pc("ngIf",e.permissions.can_add),c.Ab(5),c.pc("filterBy",e.clientUrl),c.Ab(1),c.pc("ngIf",e.dataSource.data.length))},directives:[i.m,y.a,T.a,w.a,o.f,N.c,I.a,b.j,p.a,b.c,b.e,b.b,b.g,b.i,l.a,b.d,p.b,b.a,b.f,b.h],pipes:[A.a],styles:[""]}),function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([Object(f.a)({html:"Voulez-vous supprimer cet client ?",icon:"warning"}),lt("design:type",Function),lt("design:paramtypes",[Number]),lt("design:returntype",void 0)],t.prototype,"onDelete",null),t}(),Et=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-statistique-produit"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Tb(0,"p"),c.Jc(1,"statistique-produit works!"),c.Sb())},styles:[""]}),t}(),Dt=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{s(i.next(t))}catch(e){o(e)}}function c(t){try{s(i.throw(t))}catch(e){o(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((i=i.apply(t,e||[])).next())}))},_t=function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(c){o=[6,c],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Jt=[{path:"",component:s,children:[{path:"",redirectTo:"produits",pathMatch:"full"},{path:"produits",children:[{path:"",component:tt,canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_PRODUIT_LIST}},{path:"edit",component:st,canActivate:[a.a],data:{permissions:d.c.CAN_ADD_PRODUIT}},{path:"info/:id",component:ut,canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_PRODUIT_INFO}}]},{path:"ventes",children:[{path:"",component:function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-list-vente"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Tb(0,"p"),c.Jc(1,"list-vente works!"),c.Sb())},styles:[""]}),t}(),canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_VENTE_LIST}},{path:"edit",component:function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["app-edit-vente"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Tb(0,"p"),c.Jc(1,"edit-vente works!"),c.Sb())},styles:[""]}),t}(),canActivate:[a.a],data:{permissions:d.c.CAN_ADD_VENTE}}]},{path:"clients",children:[{path:"",component:Ot,canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_CLIENT_LIST}},{path:"edit",component:function(){function t(t,e,n,i,r,o,a,c){this.fb=t,this.route=e,this.router=n,this.parametrageService=i,this.gestionProduitService=r,this.utils=o,this.snackBar=a,this.modalService=c,this.isNew=!0,this.clientId=0,this.clientUrl=h.a,this.description=d.a}return t.prototype.ngOnInit=function(){this.clientId=this.route.snapshot.params.id,this.isNew=isNaN(this.clientId),this.groupements$=this.parametrageService.getGroupements(),this.categories$=this.parametrageService.getAllCategories(),this.initForm(),this.onEdit()},t.prototype.initForm=function(){this.clientForm=this.fb.group({nom:["",[u.u.required,u.u.minLength(2)]],prenom:["",[u.u.required,u.u.minLength(2)]],telephone:["",[u.u.required,u.u.pattern(d.h)]],adresse:["",[u.u.minLength(d.a)]]})},t.prototype.resetForm=function(){this.initForm(),this.clientForm.markAsPristine(),this.clientForm.markAsUntouched(),this.clientForm.updateValueAndValidity()},t.prototype.onSubmit=function(){return Dt(this,void 0,void 0,(function(){var t,e=this;return _t(this,(function(n){return this.clientForm.invalid||(t=this.clientForm.value,(this.isNew?this.gestionProduitService.addClient(t):this.gestionProduitService.updateClient(this.clientId,t)).subscribe((function(){e.utils.showNotif("Operation effectu\xe9e avec succ\xe8s","success"),e.isNew?e.resetForm():e.router.navigate(["gestion-produits/clients"])}),(function(t){e.utils.showNotif("Une erreur est survenue lors de l'op\xe9ration ","danger")}))),[2]}))}))},t.prototype.mapclient=function(){return Dt(this,void 0,void 0,(function(){var t;return _t(this,(function(e){switch(e.label){case 0:return[4,this.gestionProduitService.getOneClient(this.clientId).toPromise()];case 1:return t=e.sent(),this.clientForm.patchValue({nom:t.nom,prenom:t.prenom,telephone:t.telephone,adresse:t.adresse}),[2]}}))}))},t.prototype.onEdit=function(){!this.isNew&&this.clientId>0&&this.mapclient()},t.\u0275fac=function(e){return new(e||t)(c.Nb(u.c),c.Nb(o.a),c.Nb(o.e),c.Nb(g.b),c.Nb(h.b),c.Nb(v.a),c.Nb(et.a),c.Nb(r.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-edit-client"]],decls:51,vars:11,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-12","form-inline"],["mat-mini-fab","","color","info","routerLink",".."],[1,"card-title","ml-1","text-white"],[1,"card-body"],[3,"filterBy","diameter"],["usrSpinner",""],[1,"col-md-8","offset-md-2","col-sm-12"],[3,"formGroup"],[1,"col-12"],["matInput","","type","text","formControlName","nom"],["matInput","","type","text","formControlName","prenom"],["matInput","","type","number","minlength","1","formControlName","telephone"],["matInput","","formControlName","adresse"],[1,"text-center"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"button",4),c.Tb(5,"mat-icon"),c.Jc(6,"reply"),c.Sb(),c.Sb(),c.Tb(7,"h2",5),c.Jc(8),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(9,"div",6),c.Ob(10,"app-spinner",7,8),c.Tb(12,"div",2),c.Tb(13,"div",9),c.Tb(14,"div"),c.Tb(15,"form",10),c.Tb(16,"div",2),c.Tb(17,"div",11),c.Tb(18,"mat-form-field"),c.Tb(19,"mat-label"),c.Jc(20,"Nom client *"),c.Sb(),c.Ob(21,"input",12),c.Tb(22,"mat-error"),c.Jc(23,"La client est obligatoire et contient au moins 2 caract\xe8res"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(24,"div",2),c.Tb(25,"div",11),c.Tb(26,"mat-form-field"),c.Tb(27,"mat-label"),c.Jc(28,"Prenom client *"),c.Sb(),c.Ob(29,"input",13),c.Tb(30,"mat-error"),c.Jc(31,"Le prenom est obligatoire et contient au moins 2 caract\xe8res"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(32,"div",2),c.Tb(33,"div",11),c.Tb(34,"mat-form-field"),c.Tb(35,"mat-label"),c.Jc(36,"T\xe9l\xe9phone client *"),c.Sb(),c.Ob(37,"input",14),c.Tb(38,"mat-error"),c.Jc(39,"Le num\xe9ro de t\xe9l\xe9phone est obligatoire et contient au moins 3 caract\xe8res"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(40,"div",2),c.Tb(41,"div",11),c.Tb(42,"mat-form-field"),c.Tb(43,"mat-label"),c.Jc(44,"Adresse "),c.Sb(),c.Ob(45,"textarea",15),c.Sb(),c.Sb(),c.Sb(),c.Tb(46,"div",16),c.Tb(47,"button",17),c.ec("click",(function(){return e.onSubmit()})),c.jc(48,"async"),c.jc(49,"async"),c.Jc(50," Enregistrer "),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var n=c.xc(11);c.Ab(8),c.Lc(" ",e.isNew?"Enregistrement d'un client":"Modification d'un client "," "),c.Ab(2),c.pc("filterBy",e.clientUrl)("diameter",30),c.Ab(5),c.pc("formGroup",e.clientForm),c.Ab(32),c.Fb("spinner",c.kc(48,7,n.loadingEvent$)),c.pc("disabled",e.clientForm.invalid||c.kc(49,9,n.loadingEvent$))}},directives:[y.a,o.f,T.a,w.a,u.w,u.m,u.e,N.c,N.f,I.a,u.b,u.l,u.d,N.b,u.q,u.h],pipes:[i.b],styles:['.mat-form-field[_ngcontent-%COMP%]{font-size:17px;width:100%}@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}']}),t}(),canActivate:[a.a],data:{permissions:d.c.CAN_ADD_CLIENT}}]},{path:"statistiques",children:[{path:"",component:Et,canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_STATISTIQUE_LIST}}]}]}],Rt=function(){function t(){}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(Jt)],o.i]}),t}(),Ht=n("iYTy"),Lt=n("Vm88"),Ft=n("0IaG"),Ut=function(){function t(){}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[i.c,Rt,r.b,u.g,Ht.a,Lt.a,Ft.a,u.s]]}),t}()},d414:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("PSD3"),r=n.n(i),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{s(i.next(t))}catch(e){o(e)}}function c(t){try{s(i.throw(t))}catch(e){o(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((i=i.apply(t,e||[])).next())}))},a=function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(c){o=[6,c],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function c(t){return function(e,n,i){var c=i.value,s={title:"Suppression",html:"Voulez-vous effectuer cette op\xe9ration?",showCancelButton:!0,confirmButtonText:"OUI",cancelButtonText:"NON",icon:"question",confirmButtonColor:"#F15F6B",cancelButtonColor:"#006d5b"};return t&&Object.keys(t).forEach((function(e){return s[e]=t[e]})),i.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,r.a.fire(s)];case 1:return e.sent().isConfirmed?[2,c.apply(this,t)]:[2]}}))}))},i}}}}]);