(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{HFeA:function(e,t,i){"use strict";i.r(t),i.d(t,"UserManagementModule",(function(){return Yt}));var n=i("ofXK"),r=i("7HIQ"),o=i("eIep"),c=i("vkgz"),a=i("2Vo4"),s=i("LRne"),u=function(){return function(){}}(),b=function(){return function(){this.permissions=new Array}}(),l=function(){return function(){this.region=new u}}(),p=function(){return function(){this.prefecture=new l}}(),f=function(){return function(){this.commune=new p}}(),d=function(){return function(){this.quartier=new f}}(),m=function(){return function(){this.role=new b,this.region=new u,this.prefecture=new l,this.commune=new p,this.quartier=new f,this.secteur=new d}}(),h=i("PSD3"),v=i.n(h),S=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function c(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},g=function(e,t){var i,n,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function T(e){return function(t,i,n){var r=n.value,o={title:"Suppression",html:"Voulez-vous effectuer cette op\xe9ration?",showCancelButton:!0,confirmButtonText:"OUI",cancelButtonText:"NON",icon:"question"};return e&&Object.keys(e).forEach((function(t){return o[t]=e[t]})),n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,v.a.fire(o)];case 1:return t.sent().isConfirmed?[2,r.apply(this,e)]:[2]}}))}))},n}}var y=i("fXoL"),w=i("tyNb"),A=i("D7GG"),k=i("bTqV"),I=i("NFeN"),O=i("I/UU"),J=i("Xa2L");function C(e,t){if(1&e&&(y.Tb(0,"div",2),y.Ob(1,"mat-spinner",3),y.Sb()),2&e){var i=y.ic();y.Ab(1),y.pc("diameter",i.diameter)}}function N(e,t){1&e&&(y.Tb(0,"div",4),y.Jc(1," Une erreur est survenue lors du chargement, merci de r\xe9essayer plus tard!!!\n"),y.Sb())}var x=function(){function e(e){this.httpState=e,this.isLoading=!1,this.isError=!1,this.filterBy=null,this.diameter=40,this.display=!0,this.loadingEvent$=new y.o}return e.prototype.ngOnInit=function(){var e=this;this.httpState.state.subscribe((function(t){t&&t.url&&(e.filterBy?-1!==t.url.indexOf(e.filterBy)&&(e.isLoading=t.state===O.a.start,e.isError=t.isError):(e.isLoading=t.state===O.a.start,e.isError=t.isError),e.loadingEvent$.emit(e.isLoading))}))},e.\u0275fac=function(t){return new(t||e)(y.Nb(O.b))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-spinner"]],inputs:{filterBy:"filterBy",diameter:"diameter",display:"display"},outputs:{loadingEvent$:"loadingEvent$"},decls:2,vars:2,consts:[["class","spinner-center",4,"ngIf"],["class","spinner-center text-danger font-italic",4,"ngIf"],[1,"spinner-center"],[3,"diameter"],[1,"spinner-center","text-danger","font-italic"]],template:function(e,t){1&e&&(y.Hc(0,C,2,1,"div",0),y.Hc(1,N,2,0,"div",1)),2&e&&(y.pc("ngIf",t.isLoading&&t.display),y.Ab(1),y.pc("ngIf",t.isError&&t.display))},directives:[n.m,J.b],styles:[".loading[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}"]}),e}(),F=i("1jcm"),R=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function P(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div"),y.Tb(1,"div",2),y.Tb(2,"div",13),y.Tb(3,"ul",14),y.Tb(4,"li",15),y.Tb(5,"div",2),y.Tb(6,"div",16),y.Jc(7,"Nom d'utilisateur"),y.Sb(),y.Tb(8,"div",17),y.Jc(9),y.Sb(),y.Sb(),y.Sb(),y.Tb(10,"li",15),y.Tb(11,"div",2),y.Tb(12,"div",16),y.Jc(13,"Nom"),y.Sb(),y.Tb(14,"div",18),y.Jc(15),y.Sb(),y.Sb(),y.Sb(),y.Tb(16,"li",15),y.Tb(17,"div",2),y.Tb(18,"div",16),y.Jc(19,"Prenom"),y.Sb(),y.Tb(20,"div",18),y.Jc(21),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(22,"div",13),y.Tb(23,"ul",14),y.Tb(24,"li",15),y.Tb(25,"div",2),y.Tb(26,"div",16),y.Jc(27,"Email"),y.Sb(),y.Tb(28,"div",18),y.Jc(29),y.Sb(),y.Sb(),y.Sb(),y.Tb(30,"li",15),y.Tb(31,"div",2),y.Tb(32,"div",16),y.Jc(33,"Telephone"),y.Sb(),y.Tb(34,"div",18),y.Jc(35),y.Sb(),y.Sb(),y.Sb(),y.Tb(36,"li",15),y.Tb(37,"div",2),y.Tb(38,"div",16),y.Jc(39,"Statut"),y.Sb(),y.Tb(40,"div",18),y.Tb(41,"mat-slide-toggle",19),y.ec("change",(function(){y.zc(i);var e=t.ngIf;return y.ic().onChangeStatus(e.id)})),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb()}if(2&e){var n=t.ngIf;y.Ab(9),y.Kc(n.username),y.Ab(6),y.Kc(n.nom),y.Ab(6),y.Kc(n.prenom),y.Ab(8),y.Kc(n.email),y.Ab(6),y.Kc(n.telephone),y.Ab(6),y.pc("checked","Activated"===n.statut)}}function j(e,t){1&e&&(y.Tb(0,"h2"),y.Jc(1,"Localit\xe9"),y.Sb())}function L(e,t){if(1&e&&(y.Tb(0,"li",15),y.Tb(1,"div",2),y.Tb(2,"div",16),y.Jc(3,"Region"),y.Sb(),y.Tb(4,"div",18),y.Jc(5),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(5),y.Kc(i.nom)}}function E(e,t){if(1&e&&(y.Tb(0,"li",15),y.Tb(1,"div",2),y.Tb(2,"div",16),y.Jc(3,"Prefecture"),y.Sb(),y.Tb(4,"div",18),y.Jc(5),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(5),y.Kc(i.nom)}}function _(e,t){if(1&e&&(y.Tb(0,"li",15),y.Tb(1,"div",2),y.Tb(2,"div",16),y.Jc(3,"Sous-Prefecture/Commune"),y.Sb(),y.Tb(4,"div",18),y.Jc(5),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(5),y.Kc(i.nom)}}function M(e,t){if(1&e&&(y.Tb(0,"li",15),y.Tb(1,"div",2),y.Tb(2,"div",16),y.Jc(3,"Quartier"),y.Sb(),y.Tb(4,"div",18),y.Jc(5),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(5),y.Kc(i.nom)}}function H(e,t){if(1&e&&(y.Tb(0,"li",15),y.Tb(1,"div",2),y.Tb(2,"div",16),y.Jc(3,"Secteur"),y.Sb(),y.Tb(4,"div",18),y.Jc(5),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(5),y.Kc(i.nom)}}function U(e,t){if(1&e&&(y.Tb(0,"div",20),y.Hc(1,j,2,0,"h2",10),y.Tb(2,"div",2),y.Tb(3,"div",16),y.Tb(4,"ul",14),y.Hc(5,L,6,1,"li",21),y.Hc(6,E,6,1,"li",21),y.Hc(7,_,6,1,"li",21),y.Sb(),y.Sb(),y.Tb(8,"div",16),y.Tb(9,"ul",14),y.Hc(10,M,6,1,"li",21),y.Hc(11,H,6,1,"li",21),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(1),y.pc("ngIf",i.region),y.Ab(4),y.pc("ngIf",i.region),y.Ab(1),y.pc("ngIf",i.prefecture),y.Ab(1),y.pc("ngIf",i.commune),y.Ab(3),y.pc("ngIf",i.quartier),y.Ab(1),y.pc("ngIf",i.secteur)}}function D(e,t){if(1&e&&(y.Tb(0,"button",24),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("title",i.description||""),y.Ab(1),y.Kc(i.libelle)}}function q(e,t){if(1&e&&(y.Tb(0,"div",20),y.Tb(1,"div",2),y.Tb(2,"div",16),y.Tb(3,"fieldset",22),y.Tb(4,"legend",22),y.Jc(5),y.Sb(),y.Hc(6,D,2,2,"button",23),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e){var i=y.ic();y.Ab(5),y.Kc(i.role.nom),y.Ab(1),y.pc("ngForOf",i.role.permissions)}}var z=function(e){return{id:e}},Q=function(e){return["/users/edit",e]},K=function(){function e(e,t,i,n){this.route=e,this.userService=t,this.utils=i,this.router=n,this.subject=new a.a(0),this.returnUrl="../..",this.userUrl=r.b}return e.prototype.ngOnInit=function(){var e=this;this.urlSubscription=this.utils.previousUrl$.subscribe((function(t){e.returnUrl=t||e.returnUrl})),this.userId=this.route.snapshot.params.id,this.user$=isNaN(this.userId)?Object(s.a)(new m).pipe(Object(c.a)((function(){e.router.navigate([e.returnUrl])}))):this.subject.asObservable().pipe(Object(o.a)((function(){return e.userService.getOne(e.userId).pipe(Object(c.a)((function(t){e.role=t.role})))})))},e.prototype.onChangeStatus=function(e){var t=this;this.userService.changeStatus(e).subscribe((function(){return t.subject.next(0)}))},e.prototype.onDelete=function(e){var t=this;this.userService.delete(e).subscribe((function(){t.utils.showNotif("Utilisateur supprim\xe9 avec succ\xe8s","success"),t.router.navigate([t.returnUrl])}),(function(e){t.utils.showNotif("Une erreur est survenue lors de l'operation "+e,"danger")}))},e.prototype.ngOnDestroy=function(){this.urlSubscription&&this.urlSubscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(y.Nb(w.a),y.Nb(r.c),y.Nb(A.a),y.Nb(w.e))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-single-user"]],decls:23,vars:14,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-8","form-inline"],["mat-mini-fab","","color","info",3,"routerLink"],[1,"card-title","ml-1","text-white"],[1,"col-sm-4","text-right"],["mat-mini-fab","","color","warn",3,"click"],[1,"card-body"],[3,"filterBy"],[4,"ngIf"],["class","card card-body ",4,"ngIf"],["class","card card-body",4,"ngIf"],[1,"col-md-6"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"col"],[1,"col","font-weight-bold","font-italic"],[1,"col","font-weight-bold"],["color","primary",3,"checked","change"],[1,"card","card-body"],["class","list-group-item",4,"ngIf"],[1,"fieldset-border"],["mat-button","","color","info-default",3,"title",4,"ngFor","ngForOf"],["mat-button","","color","info-default",3,"title"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"button",4),y.Tb(5,"mat-icon"),y.Jc(6,"reply"),y.Sb(),y.Sb(),y.Tb(7,"h2",5),y.Jc(8," Utilisateur "),y.Sb(),y.Sb(),y.Tb(9,"div",6),y.Tb(10,"button",4),y.Tb(11,"mat-icon"),y.Jc(12,"edit"),y.Sb(),y.Sb(),y.Tb(13,"button",7),y.ec("click",(function(){return t.onDelete(t.userId)})),y.Tb(14,"mat-icon"),y.Jc(15,"delete"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(16,"div",8),y.Ob(17,"app-spinner",9),y.Hc(18,P,42,6,"div",10),y.jc(19,"async"),y.Sb(),y.Sb(),y.Hc(20,U,12,6,"div",11),y.jc(21,"async"),y.Hc(22,q,7,2,"div",12)),2&e&&(y.Ab(4),y.pc("routerLink",t.returnUrl),y.Ab(6),y.pc("routerLink",y.tc(12,Q,y.tc(10,z,t.userId))),y.Ab(7),y.pc("filterBy",t.userUrl),y.Ab(1),y.pc("ngIf",y.kc(19,6,t.user$)),y.Ab(2),y.pc("ngIf",y.kc(21,8,t.user$)),y.Ab(2),y.pc("ngIf",t.role))},directives:[k.a,w.f,I.a,x,n.m,F.a,n.l],pipes:[n.b],styles:[""]}),function(e,t,i,n){var r,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(o<3?r(c):o>3?r(t,i,c):r(t,i))||c);o>3&&c&&Object.defineProperty(t,i,c)}([T({html:"Voulez-vous supprimer cet utilisateur ?",icon:"warning"}),R("design:type",Function),R("design:paramtypes",[Number]),R("design:returntype",void 0)],e.prototype,"onDelete",null),e}(),V=i("3Pt+"),B=i("6vGg"),G=i("dNgK"),W=i("kmnG"),X=i("qFsG"),Y=i("bSwM"),Z=i("Qu3c"),ee=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function c(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},te=function(e,t){var i,n,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function ie(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",18),y.Tb(1,"mat-checkbox",19),y.ec("ngModelChange",(function(e){y.zc(i);var n=t.index;return y.ic().permissionForms[n].value=e})),y.Jc(2),y.Sb(),y.Ob(3,"hr"),y.Sb()}if(2&e){var n=t.$implicit,r=t.index,o=y.ic();y.Ab(1),y.pc("disabled",n.disable)("ngModel",o.permissionForms[r].value)("matTooltip",n.permission.description),y.Ab(1),y.Kc(n.permission.libelle)}}var ne=function(){function e(e,t,i,n,o,c){this.fb=e,this.userService=t,this.route=i,this.snackBar=n,this.router=o,this.utils=c,this.isNew=!0,this.permissionForms=new Array,this.roleId=0,this.roleUrl=r.a}return e.prototype.ngOnInit=function(){this.roleId=this.route.snapshot.params.id,this.isNew=isNaN(this.roleId),this.initPermissions(),this.initForm(),this.isNew||this.mapRole()},e.prototype.initForm=function(){this.roleForm=this.fb.group({nom:["",[V.u.required,V.u.minLength(3)]],description:""})},e.prototype.resetForm=function(){this.initForm(),this.roleForm.markAsUntouched(),this.roleForm.markAsPristine(),this.roleForm.updateValueAndValidity(),this.initPermissions()},e.prototype.onSubmit=function(){var e=this;if(this.roleForm.invalid){var t=this.roleForm.controls;Object.keys(t).forEach((function(e){return t[e].markAsTouched()}))}else{var i=this.roleForm.value;i.permissions=this.permissionForms.filter((function(e){return!0===e.value})).map((function(e){return e.permission})),0!==i.permissions.length?(this.isNew?this.userService.addRole(i):this.userService.updateRole(this.roleId,i)).subscribe((function(){e.utils.showNotif("Operation effectu\xe9e avec succ\xe8s","success"),e.isNew?e.resetForm():e.router.navigate(["users/roles"])}),(function(t){e.utils.showNotif("Une erreur est survenue lors de l'op\xe9ration \n "+t,"danger")})):this.snackBar.open("Impossible d'ajouter un role sans permission","",{duration:3e3,verticalPosition:"top",panelClass:["my-snack-warning"]})}},e.prototype.mapRole=function(){return ee(this,void 0,void 0,(function(){var e,t=this;return te(this,(function(i){switch(i.label){case 0:return[4,this.userService.getOneRole(this.roleId).toPromise()];case 1:return e=i.sent(),this.roleForm.patchValue({nom:e.nom,description:e.description}),this.initPermissions().then((function(){t.permissionForms=t.permissionForms.map((function(t){return{permission:t.permission,value:e.permissions.some((function(e){return e.id===t.permission.id})),disable:t.disable}}))})),[2]}}))}))},e.prototype.initPermissions=function(){return ee(this,void 0,void 0,(function(){var e;return te(this,(function(t){switch(t.label){case 0:return[4,this.userService.getAllPermission().toPromise()];case 1:return e=t.sent(),this.permissionForms=e.map((function(e){var t=!1,i=!1;return e.libelle===B.b.CAN_VIEW_DASHBORD&&(t=!0,i=!0),{permission:e,value:t,disable:i}})),[2]}}))}))},e.\u0275fac=function(t){return new(t||e)(y.Nb(V.c),y.Nb(r.c),y.Nb(w.a),y.Nb(G.a),y.Nb(w.e),y.Nb(A.a))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-edit-role"]],decls:38,vars:8,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-12","form-inline"],["mat-mini-fab","","color","info","routerLink",".."],[1,"card-title","ml-1","text-white"],[1,"card-body"],[3,"filterBy","diameter"],["roleSpinner",""],[1,"col-md-8","offset-md-2","col-sm-12"],[3,"formGroup"],[1,"col-12"],["matInput","","type","text","formControlName","nom","placeholder","Saisissez le nom du role"],["matInput","","formControlName","description","placeholder","Faites une description du role"],[1,"fieldset-border"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"text-center","mt-2"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-md-4"],[3,"disabled","ngModel","matTooltip","ngModelChange"]],template:function(e,t){if(1&e&&(y.Tb(0,"div",0),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"button",4),y.Tb(5,"mat-icon"),y.Jc(6,"reply"),y.Sb(),y.Sb(),y.Tb(7,"h2",5),y.Jc(8),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(9,"div",6),y.Ob(10,"app-spinner",7,8),y.Tb(12,"div",2),y.Tb(13,"div",9),y.Tb(14,"form",10),y.Tb(15,"div",2),y.Tb(16,"div",11),y.Tb(17,"mat-form-field"),y.Tb(18,"mat-label"),y.Jc(19,"Nom"),y.Sb(),y.Ob(20,"input",12),y.Tb(21,"mat-error"),y.Jc(22,"Nom incorrect"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(23,"div",2),y.Tb(24,"div",11),y.Tb(25,"mat-form-field"),y.Tb(26,"mat-label"),y.Jc(27,"Description"),y.Sb(),y.Ob(28,"textarea",13),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(29,"fieldset",14),y.Tb(30,"legend",14),y.Jc(31,"Permissions"),y.Sb(),y.Tb(32,"div",2),y.Hc(33,ie,4,4,"div",15),y.Sb(),y.Sb(),y.Tb(34,"div",16),y.Tb(35,"button",17),y.ec("click",(function(){return t.onSubmit()})),y.jc(36,"async"),y.Jc(37,"Enregistrer"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e){var i=y.xc(11);y.Ab(8),y.Lc(" ",t.isNew?"Enregistrement d'un role":"Modification d'un role"," "),y.Ab(2),y.pc("filterBy",t.roleUrl)("diameter",30),y.Ab(4),y.pc("formGroup",t.roleForm),y.Ab(19),y.pc("ngForOf",t.permissionForms),y.Ab(2),y.pc("disabled",y.kc(36,6,i.loadingEvent$))}},directives:[k.a,w.f,I.a,x,V.w,V.m,V.e,W.c,W.f,X.a,V.b,V.l,V.d,W.b,n.l,Y.a,V.o,Z.a],pipes:[n.b],styles:[".mat-form-field[_ngcontent-%COMP%]{font-size:17px;width:100%}"]}),e}(),re=i("9qFf"),oe=i("1kSV"),ce=function(){function e(){}return e.prototype.transform=function(e){switch(e){case B.c.ROLE_ADMIN:return"Administrateur";case B.c.ROLE_ASSISTANT_ADMIN:return"Assistant Administrateur";case B.c.ROLE_CONSULTANT:return"Consultant";case B.c.ROLE_GROSSISTE:return"Grossiste";default:return""}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=y.Mb({name:"roleNameFormat",type:e,pure:!0}),e}(),ae=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function se(e,t){1&e&&(y.Tb(0,"button",12),y.Tb(1,"mat-icon"),y.Jc(2,"add"),y.Sb(),y.Sb())}function ue(e,t){1&e&&(y.Tb(0,"th"),y.Jc(1,"OPTIONS"),y.Sb())}function be(e,t){if(1&e&&(y.Tb(0,"li",35),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.Ab(1),y.Lc(" ",i.libelle," ")}}function le(e,t){if(1&e&&(y.Tb(0,"div",32),y.Tb(1,"ul",33),y.Hc(2,be,2,1,"li",34),y.Sb(),y.Sb()),2&e){var i=y.ic().$implicit;y.Ab(2),y.pc("ngForOf",i.permissions)}}var pe=function(e){return{id:e}},fe=function(e){return["edit",e]};function de(e,t){if(1&e&&(y.Tb(0,"button",38),y.Tb(1,"mat-icon"),y.Jc(2,"edit"),y.Sb(),y.Sb()),2&e){var i=y.ic(2).$implicit;y.pc("routerLink",y.tc(3,fe,y.tc(1,pe,i.id)))}}function me(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",39),y.ec("click",(function(){y.zc(i);var e=y.ic(2).$implicit;return y.ic(3).onDelete(e.id)})),y.Tb(1,"mat-icon"),y.Jc(2,"delete"),y.Sb(),y.Sb()}}function he(e,t){if(1&e&&(y.Tb(0,"td"),y.Hc(1,de,3,5,"button",36),y.Hc(2,me,3,0,"button",37),y.Sb()),2&e){var i=y.ic(4);y.Ab(1),y.pc("ngIf",i.permissions.can_edit),y.Ab(1),y.pc("ngIf",i.permissions.can_delete)}}function ve(e,t){if(1&e&&(y.Tb(0,"tr"),y.Tb(1,"th",29),y.Jc(2),y.Sb(),y.Tb(3,"td"),y.Jc(4),y.jc(5,"roleNameFormat"),y.Sb(),y.Tb(6,"td"),y.Jc(7),y.Sb(),y.Tb(8,"td"),y.Tb(9,"button",30),y.Tb(10,"mat-icon"),y.Jc(11,"visibility"),y.Sb(),y.Sb(),y.Hc(12,le,3,1,"ng-template",null,31,y.Ic),y.Sb(),y.Hc(14,he,3,2,"td",11),y.Sb()),2&e){var i=t.$implicit,n=t.index,r=y.xc(13),o=y.ic(3);y.Ab(2),y.Kc((o.page-1)*o.pageSize+1+n),y.Ab(2),y.Kc(y.lc(5,5,i.nom,i.nom)),y.Ab(3),y.Kc(i.description),y.Ab(2),y.pc("ngbPopover",r),y.Ab(5),y.pc("ngIf",o.permissions.can_edit||o.permissions.can_delete)}}function Se(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div"),y.Tb(1,"div",2),y.Tb(2,"div",15),y.Tb(3,"label",16),y.Jc(4,"Taille"),y.Sb(),y.Tb(5,"select",17),y.ec("ngModelChange",(function(e){return y.zc(i),y.ic(2).pageSize=e})),y.Tb(6,"option",18),y.Jc(7,"5"),y.Sb(),y.Tb(8,"option",19),y.Jc(9,"10"),y.Sb(),y.Tb(10,"option",20),y.Jc(11,"50"),y.Sb(),y.Tb(12,"option",21),y.Jc(13,"100"),y.Sb(),y.Tb(14,"option",22),y.Jc(15,"Tout"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(16,"div",23),y.Tb(17,"table",24),y.Tb(18,"thead",25),y.Tb(19,"th"),y.Jc(20,"#"),y.Sb(),y.Tb(21,"th"),y.Jc(22,"ROLES"),y.Sb(),y.Tb(23,"th"),y.Jc(24,"DESCRIPTION"),y.Sb(),y.Tb(25,"th",26),y.Jc(26,"PERMISSIONS"),y.Sb(),y.Hc(27,ue,2,0,"th",11),y.Sb(),y.Tb(28,"tbody",25),y.Hc(29,ve,15,8,"tr",27),y.jc(30,"slice"),y.Sb(),y.Sb(),y.Sb(),y.Tb(31,"ngb-pagination",28),y.ec("pageChange",(function(e){return y.zc(i),y.ic(2).page=e})),y.Sb(),y.Sb()}if(2&e){var n=y.ic().ngIf,r=y.ic();y.Ab(5),y.pc("ngModel",r.pageSize),y.Ab(9),y.pc("value",n.length),y.Ab(13),y.pc("ngIf",r.permissions.can_edit||r.permissions.can_delete),y.Ab(2),y.pc("ngForOf",y.mc(30,11,n,(r.page-1)*r.pageSize,(r.page-1)*r.pageSize+r.pageSize)),y.Ab(2),y.pc("page",r.page)("pageSize",r.pageSize)("collectionSize",n.length)("rotate",!0)("ellipses",!1)("boundaryLinks",!0)("maxSize",5)}}function ge(e,t){1&e&&(y.Tb(0,"div",40),y.Jc(1," Aucun role trouv\xe9 !!! "),y.Sb())}function Te(e,t){if(1&e&&(y.Tb(0,"div"),y.Hc(1,Se,32,15,"div",13),y.Hc(2,ge,2,0,"ng-template",null,14,y.Ic),y.Sb()),2&e){var i=t.ngIf,n=y.xc(3);y.Ab(1),y.pc("ngIf",i.length>0)("ngIfElse",n)}}var ye=function(){function e(e,t,i){this.userService=e,this.auth=t,this.utils=i,this.subject=new a.a(0),this.page=1,this.pageSize=5,this.permissions={can_add:!1,can_edit:!1,can_delete:!1},this.roleUrl=r.a}return e.prototype.ngOnInit=function(){var e=this;this.setPermissions(),this.roles$=this.subject.asObservable().pipe(Object(o.a)((function(){return e.userService.getAllRoles()})))},e.prototype.onRefresh=function(){this.subject.next(0)},e.prototype.onDelete=function(e){var t=this;this.userService.deleteRole(e).subscribe((function(){t.utils.showNotif("Role supprim\xe9 avec succ\xe8s","success"),t.onRefresh()}),(function(e){t.utils.showNotif("Une erreur est survenue lors de l'operation "+e,"danger")}))},e.prototype.ngAfterViewInit=function(){$((function(){$('[data-toggle="popover"]').popover()}))},e.prototype.setPermissions=function(){var e=this.auth.getPermissions();this.permissions={can_add:e.includes(B.b.CAN_ADD_ROLE),can_edit:e.includes(B.b.CAN_UPDATE_ROLE),can_delete:e.includes(B.b.CAN_DELETE_ROLE)}},e.\u0275fac=function(t){return new(t||e)(y.Nb(r.c),y.Nb(re.a),y.Nb(A.a))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-list-role"]],decls:16,vars:5,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-8"],[1,"card-title","text-white"],[1,"nc-icon","nc-single-02"],[1,"col-sm-4","text-right","mt-2"],["mat-raised-button","","routerLink","edit","class","mr-1","color","info",4,"ngIf"],["mat-raised-button","","color","info",3,"click"],[1,"card-body"],[3,"filterBy"],[4,"ngIf"],["mat-raised-button","","routerLink","edit","color","info",1,"mr-1"],[4,"ngIf","ngIfElse"],["noData",""],[1,"col-md-2","col-sm-6","mb-3"],["for","taille",1,"col-form-label"],["id","taille","name","taille",1,"custom-select",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","50"],["value","100"],[3,"value"],[1,"table-responsive","mb-2"],[1,"table","table-striped","table-bordered"],[1,"text-center"],[2,"width","20px"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center",3,"page","pageSize","collectionSize","rotate","ellipses","boundaryLinks","maxSize","pageChange"],["scope","row"],["mat-mini-fab","","color","info","container","body","placement","left","popoverTitle","Permissions",3,"ngbPopover"],["permissionsMessage",""],[1,"permissions"],[1,"list-group","list-group","flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["mat-mini-fab","","color","info",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click",4,"ngIf"],["mat-mini-fab","","color","info",3,"routerLink"],["mat-mini-fab","","color","accent",3,"click"],[1,"text-center","text-info"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"h2",4),y.Ob(5,"i",5),y.Jc(6," Liste des roles "),y.Sb(),y.Sb(),y.Tb(7,"div",6),y.Hc(8,se,3,0,"button",7),y.Tb(9,"button",8),y.ec("click",(function(){return t.onRefresh()})),y.Tb(10,"mat-icon"),y.Jc(11,"refresh"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(12,"div",9),y.Ob(13,"app-spinner",10),y.Hc(14,Te,4,2,"div",11),y.jc(15,"async"),y.Sb(),y.Sb()),2&e&&(y.Ab(8),y.pc("ngIf",t.permissions.can_add),y.Ab(5),y.pc("filterBy",t.roleUrl),y.Ab(1),y.pc("ngIf",y.kc(15,3,t.roles$)))},directives:[n.m,k.a,I.a,x,w.f,V.t,V.l,V.o,V.p,V.v,n.l,oe.c,oe.d],pipes:[n.b,n.u,ce],styles:[".permissions[_ngcontent-%COMP%]{height:200px;overflow-y:auto;width:200px}"]}),function(e,t,i,n){var r,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(o<3?r(c):o>3?r(t,i,c):r(t,i))||c);o>3&&c&&Object.defineProperty(t,i,c)}([T({html:"Voulez-vous supprimer ce role ? <br>Les utilisateur ayant ce role auront un role par defaut",icon:"warning"}),ae("design:type",Function),ae("design:paramtypes",[Number]),ae("design:returntype",void 0)],e.prototype,"onDelete",null),e}(),we=i("AytR"),Ae=i("lJxs"),ke=i("tk/3"),Ie="localites/",Oe="regions/",Je="prefectures/",Ce="communes/",Ne="quartiers/",xe="secteurs/",Fe=we.a.apiUrl,Re=function(e){return!!e&&e.length>0},Pe=function(){function e(e){this.http=e,this.subjectRegion=new a.a(0),this.subjectPrefecture=new a.a(0),this.subjectCommune=new a.a(0),this.subjectQuartier=new a.a(0),this.subjectSecteur=new a.a(0)}return e.prototype.getAll=function(){return this.http.get(Fe+Ie)},e.prototype.getOne=function(e){return this.http.get(Fe+Ie+e)},e.prototype.add=function(e){return this.http.post(Fe+Ie,e)},e.prototype.update=function(e){return this.http.put(Fe+Ie+e.id,e)},e.prototype.delete=function(e){return this.http.delete(Fe+Ie+e)},e.prototype.getRegions=function(){var e=this;return Re(this.regions)?Object(s.a)(this.regions):this.http.get(Fe+Oe).pipe(Object(c.a)((function(t){return e.regions=t})))},e.prototype.getOneRegion=function(e){if(Re(this.regions)){var t=this.regions.find((function(t){return t.id===e}));return Object(s.a)(t)}return this.http.get(Fe+Oe+e)},e.prototype.getPrefectures=function(){var e=this;return Re(this.prefectures)?Object(s.a)(this.prefectures):this.http.get(Fe+Je).pipe(Object(c.a)((function(t){return e.prefectures=t})))},e.prototype.getOnePrefecture=function(e){if(Re(this.prefectures)){var t=this.prefectures.find((function(t){return t.id===e}));return Object(s.a)(t)}return this.http.get(Fe+Je+e)},e.prototype.getCommunes=function(){var e=this;return Re(this.communes)?Object(s.a)(this.communes):this.http.get(Fe+Ce).pipe(Object(c.a)((function(t){return e.communes=t})))},e.prototype.getOnecommune=function(e){if(Re(this.communes)){var t=this.communes.find((function(t){return t.id===e}));return Object(s.a)(t)}return this.http.get(Fe+Ce+e)},e.prototype.getAllQuartiers=function(){return this.http.get(Fe+Ne)},e.prototype.getOneQuartier=function(e){return this.http.get(Fe+Ne+e)},e.prototype.addQuartier=function(e){return this.http.post(Fe+Ne,e)},e.prototype.updateQuartier=function(e){return this.http.put(Fe+Ne+e.id,e)},e.prototype.deleteQuartier=function(e){return this.http.delete(Fe+Ne+e)},e.prototype.getAllSecteurs=function(){return this.http.get(Fe+xe)},e.prototype.getOneSecteur=function(e){return this.http.get(Fe+xe+e)},e.prototype.addSecteur=function(e){return this.http.post(Fe+xe,e)},e.prototype.updateSecteur=function(e){return this.http.put(Fe+xe+e.id,e)},e.prototype.deleteSecteur=function(e){return this.http.delete(Fe+xe+e)},e.prototype.getRegions$=function(){var e=this;return this.subjectRegion.asObservable().pipe(Object(o.a)((function(){return e.getRegions()})))},e.prototype.getPrefectures$=function(){var e=this;return this.subjectPrefecture.asObservable().pipe(Object(o.a)((function(t){return 0===t?e.getPrefectures():e.getPrefectures().pipe(Object(Ae.a)((function(e){return e.filter((function(e){return e.region.id===t}))})))})))},e.prototype.getCommunes$=function(){var e=this;return this.subjectCommune.asObservable().pipe(Object(o.a)((function(t){return 0===t?e.getCommunes():e.getCommunes().pipe(Object(Ae.a)((function(e){return e.filter((function(e){return e.prefecture.id===t}))})))})))},e.prototype.getQuartiers$=function(){var e=this;return this.subjectQuartier.asObservable().pipe(Object(o.a)((function(t){return 0===t?e.getAllQuartiers():e.getAllQuartiers().pipe(Object(Ae.a)((function(e){return e.filter((function(e){return e.commune.id===t}))})))})))},e.prototype.getSecteurs$=function(){var e=this;return this.subjectSecteur.asObservable().pipe(Object(o.a)((function(t){return 0===t?e.getAllSecteurs():e.getAllSecteurs().pipe(Object(Ae.a)((function(e){return e.filter((function(e){return e.quartier.id===t}))})))})))},e.\u0275fac=function(t){return new(t||e)(y.bc(ke.b))},e.\u0275prov=y.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),je=i("d3UM"),Le=i("FKr1"),Ee=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function c(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},_e=function(e,t){var i,n,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function $e(e,t){if(1&e&&(y.Tb(0,"div",9),y.Tb(1,"div",10),y.Tb(2,"div",4),y.Tb(3,"div",11),y.Jc(4,"Region "),y.Sb(),y.Tb(5,"div",12),y.Jc(6),y.Sb(),y.Sb(),y.Tb(7,"div",4),y.Tb(8,"div",11),y.Jc(9,"Prefecture"),y.Sb(),y.Tb(10,"div",12),y.Jc(11),y.Sb(),y.Sb(),y.Tb(12,"div",4),y.Tb(13,"div",11),y.Jc(14,"Commune/Sous-prefecture"),y.Sb(),y.Tb(15,"div",12),y.Jc(16),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(6),y.Kc(i.prefecture.region.nom),y.Ab(5),y.Kc(i.prefecture.nom),y.Ab(5),y.Kc(i.nom)}}var Me=function(){function e(e,t,i){this.fb=e,this.localiteService=t,this.snackBar=i,this.isNew=!0,this.quartierId=0,this.isDone=new y.o,this.subjectCommune=new a.a(0)}return e.prototype.ngOnInit=function(){var e=this;this.commune$=this.subjectCommune.asObservable().pipe(Object(o.a)((function(t){return 0===t?Object(s.a)(new p):e.localiteService.getOnecommune(t)}))),this.initForm()},e.prototype.onSubmit=function(){return Ee(this,void 0,void 0,(function(){var e,t,i=this;return _e(this,(function(n){switch(n.label){case 0:return this.quartierForm.invalid?[2]:[3,1];case 1:return t=e=this.quartierForm.value,[4,this.localiteService.getOnecommune(this.communeId).toPromise()];case 2:t.commune=n.sent(),this.isNew?this.localiteService.addQuartier(e).subscribe((function(e){i.snackBar.open("Enregistr\xe9 avec succ\xe8s","Enregistrement",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-success"]}),i.resetForm(),i.isDone.emit({done:!0,id:e.id})}),(function(e){i.snackBar.open("Une erreur est survenue lors de l'enregistrement "+e,"Enregistrement",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-warning"]})})):(e.id=this.quartierId,this.localiteService.updateQuartier(e).subscribe((function(e){i.snackBar.open("Modifi\xe9 avec succ\xe8s","Modification",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-success"]}),i.resetForm(),i.isDone.emit({done:!0,id:e.id})}),(function(e){i.snackBar.open("Une erreur est survenue lors de la modificationv"+e,"Modification",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-warning"]})}))),n.label=3;case 3:return[2]}}))}))},e.prototype.initForm=function(){this.quartierForm=this.fb.group({nom:["",V.u.required],description:""})},e.prototype.resetForm=function(){this.initForm(),this.quartierForm.markAsPristine(),this.quartierForm.markAsUntouched(),this.quartierForm.updateValueAndValidity()},e.prototype.ngOnChanges=function(e){e.communeId.previousValue!==e.communeId.currentValue&&this.subjectCommune.next(this.communeId),!e.isNew.currentValue&&e.quartierId.currentValue>0&&this.mapQuartier()},e.prototype.mapQuartier=function(){return Ee(this,void 0,void 0,(function(){var e;return _e(this,(function(t){switch(t.label){case 0:return[4,this.localiteService.getOneQuartier(this.quartierId).toPromise()];case 1:return e=t.sent(),this.quartierForm.patchValue({nom:e.nom,description:e.description}),[2]}}))}))},e.\u0275fac=function(t){return new(t||e)(y.Nb(V.c),y.Nb(Pe),y.Nb(G.a))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-quartier"]],inputs:{isNew:"isNew",quartierId:"quartierId",communeId:"communeId"},outputs:{isDone:"isDone"},features:[y.yb],decls:24,vars:6,consts:[[1,"text-center"],[1,"card-title"],["class","card-body",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-12"],["type","text","matInput","","formControlName","nom"],["matInput","","formControlName","description"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],[1,"card-body"],[2,"font-size","15px"],[1,"col-6"],[1,"col-6","font-weight-bold"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"h2",1),y.Jc(2),y.Sb(),y.Sb(),y.Hc(3,$e,17,3,"div",2),y.jc(4,"async"),y.Tb(5,"div"),y.Tb(6,"form",3),y.Tb(7,"div",4),y.Tb(8,"div",5),y.Tb(9,"mat-form-field"),y.Tb(10,"mat-label"),y.Jc(11,"Nom"),y.Sb(),y.Ob(12,"input",6),y.Tb(13,"mat-error"),y.Jc(14,"Le nom est obligatoire"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(15,"div",4),y.Tb(16,"div",5),y.Tb(17,"mat-form-field"),y.Tb(18,"mat-label"),y.Jc(19,"Description"),y.Sb(),y.Ob(20,"textarea",7),y.Sb(),y.Sb(),y.Sb(),y.Tb(21,"div",0),y.Tb(22,"button",8),y.ec("click",(function(){return t.onSubmit()})),y.Jc(23," Enregistrer "),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.Ab(2),y.Kc(t.isNew?"Enregistrement":"Modification"),y.Ab(1),y.pc("ngIf",y.kc(4,4,t.commune$)),y.Ab(3),y.pc("formGroup",t.quartierForm),y.Ab(16),y.pc("disabled",t.quartierForm.invalid))},directives:[n.m,V.w,V.m,V.e,W.c,W.f,X.a,V.b,V.l,V.d,W.b,k.a],pipes:[n.b],styles:[".mat-form-field[_ngcontent-%COMP%]{font-size:17px;width:100%}"]}),e}(),He=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function c(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},Ue=function(e,t){var i,n,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function De(e,t){if(1&e&&(y.Tb(0,"div",9),y.Tb(1,"div",10),y.Tb(2,"div",4),y.Tb(3,"div",11),y.Jc(4,"Region "),y.Sb(),y.Tb(5,"div",12),y.Jc(6),y.Sb(),y.Sb(),y.Tb(7,"div",4),y.Tb(8,"div",11),y.Jc(9,"Prefecture"),y.Sb(),y.Tb(10,"div",12),y.Jc(11),y.Sb(),y.Sb(),y.Tb(12,"div",4),y.Tb(13,"div",11),y.Jc(14,"Commune/Sous-prefecture"),y.Sb(),y.Tb(15,"div",12),y.Jc(16),y.Sb(),y.Sb(),y.Tb(17,"div",4),y.Tb(18,"div",11),y.Jc(19,"Quartier"),y.Sb(),y.Tb(20,"div",12),y.Jc(21),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e){var i=t.ngIf;y.Ab(6),y.Kc(i.commune.prefecture.region.nom),y.Ab(5),y.Kc(i.commune.prefecture.nom),y.Ab(5),y.Kc(i.commune.nom),y.Ab(5),y.Kc(i.nom)}}var qe=function(){function e(e,t,i){this.fb=e,this.localiteService=t,this.snackBar=i,this.isNew=!0,this.secteurId=0,this.isDone=new y.o,this.subjectQuartier=new a.a(0)}return e.prototype.ngOnInit=function(){var e=this;this.quartier$=this.subjectQuartier.asObservable().pipe(Object(o.a)((function(t){return 0===t?Object(s.a)(new f):e.localiteService.getOneQuartier(t)}))),this.initForm()},e.prototype.onSubmit=function(){return He(this,void 0,void 0,(function(){var e,t,i=this;return Ue(this,(function(n){switch(n.label){case 0:return this.secteurForm.invalid?[3,2]:(t=e=this.secteurForm.value,[4,this.localiteService.getOneQuartier(this.quartierId).toPromise()]);case 1:t.quartier=n.sent(),this.isNew?this.localiteService.addSecteur(e).subscribe((function(e){i.snackBar.open("Enregistr\xe9 avec succ\xe8s","Enregistrement",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-success"]}),i.resetForm(),i.isDone.emit({done:!0,id:e.id})}),(function(e){i.snackBar.open("Une erreur est survenue lors de l'enregistrement "+e,"Enregistrement",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-warning"]})})):(e.id=this.secteurId,this.localiteService.updateSecteur(e).subscribe((function(e){i.snackBar.open("Modifi\xe9 avec succ\xe8s","Modification",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-success"]}),i.resetForm(),i.isDone.emit({done:!0,id:e.id})}),(function(e){i.snackBar.open("Une erreur est survenue lors de la modificationv"+e,"Modification",{duration:5e3,verticalPosition:"top",panelClass:["my-snack-warning"]})}))),n.label=2;case 2:return[2]}}))}))},e.prototype.initForm=function(){this.secteurForm=this.fb.group({nom:["",V.u.required],description:""})},e.prototype.resetForm=function(){this.initForm(),this.secteurForm.markAsPristine(),this.secteurForm.markAsUntouched(),this.secteurForm.updateValueAndValidity()},e.prototype.ngOnChanges=function(e){e.quartierId.previousValue!==e.quartierId.currentValue&&this.subjectQuartier.next(this.quartierId),!e.isNew.currentValue&&e.secteurId.currentValue>0&&this.mapSecteur()},e.prototype.mapSecteur=function(){return He(this,void 0,void 0,(function(){var e;return Ue(this,(function(t){switch(t.label){case 0:return[4,this.localiteService.getOneSecteur(this.secteurId).toPromise()];case 1:return e=t.sent(),this.secteurForm.patchValue({nom:e.nom,description:e.description}),[2]}}))}))},e.\u0275fac=function(t){return new(t||e)(y.Nb(V.c),y.Nb(Pe),y.Nb(G.a))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-secteur"]],inputs:{isNew:"isNew",secteurId:"secteurId",quartierId:"quartierId"},outputs:{isDone:"isDone"},features:[y.yb],decls:24,vars:6,consts:[[1,"text-center"],[1,"card-title"],["class","card-body",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-12"],["type","text","matInput","","formControlName","nom"],["matInput","","formControlName","description"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],[1,"card-body"],[2,"font-size","15px"],[1,"col-6"],[1,"col-6","font-weight-bold"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"h2",1),y.Jc(2),y.Sb(),y.Sb(),y.Hc(3,De,22,4,"div",2),y.jc(4,"async"),y.Tb(5,"div"),y.Tb(6,"form",3),y.Tb(7,"div",4),y.Tb(8,"div",5),y.Tb(9,"mat-form-field"),y.Tb(10,"mat-label"),y.Jc(11,"Nom"),y.Sb(),y.Ob(12,"input",6),y.Tb(13,"mat-error"),y.Jc(14,"Le nom est obligatoire"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(15,"div",4),y.Tb(16,"div",5),y.Tb(17,"mat-form-field"),y.Tb(18,"mat-label"),y.Jc(19,"Description"),y.Sb(),y.Ob(20,"textarea",7),y.Sb(),y.Sb(),y.Sb(),y.Tb(21,"div",0),y.Tb(22,"button",8),y.ec("click",(function(){return t.onSubmit()})),y.Jc(23," Enregistrer "),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.Ab(2),y.Kc(t.isNew?"Enregistrement":"Modification"),y.Ab(1),y.pc("ngIf",y.kc(4,4,t.quartier$)),y.Ab(3),y.pc("formGroup",t.secteurForm),y.Ab(16),y.pc("disabled",t.secteurForm.invalid))},directives:[n.m,V.w,V.m,V.e,W.c,W.f,X.a,V.b,V.l,V.d,W.b,k.a],pipes:[n.b],styles:[".mat-form-field[_ngcontent-%COMP%]{font-size:17px;width:100%}"]}),e}(),ze=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function c(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},Qe=function(e,t){var i,n,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function Ke(e,t){if(1&e&&(y.Tb(0,"mat-option",32),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function Ve(e,t){if(1&e&&(y.Tb(0,"mat-option",32),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function Be(e,t){if(1&e&&(y.Tb(0,"mat-option",32),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function Ge(e,t){if(1&e&&(y.Tb(0,"mat-option",32),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function We(e,t){if(1&e&&(y.Tb(0,"mat-option",32),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function Xe(e,t){if(1&e&&(y.Tb(0,"mat-option",32),y.Jc(1),y.jc(2,"roleNameFormat"),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(y.lc(2,2,i.nom,i.nom))}}function Ye(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",33),y.Tb(1,"h4",34),y.Jc(2,"Quartier"),y.Sb(),y.Tb(3,"button",35),y.ec("click",(function(){return(0,t.close)("Close click")})),y.Tb(4,"span",36),y.Jc(5,"\xd7"),y.Sb(),y.Sb(),y.Sb(),y.Tb(6,"div",37),y.Tb(7,"app-quartier",38),y.ec("isDone",(function(e){return y.zc(i),y.ic().onNewQuartier(e)})),y.Sb(),y.Sb()}if(2&e){var n=y.ic();y.Ab(7),y.pc("isNew",!0)("communeId",n.communeId)}}function Ze(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",33),y.Tb(1,"h4",34),y.Jc(2,"Secteur"),y.Sb(),y.Tb(3,"button",35),y.ec("click",(function(){return(0,t.close)("Close click")})),y.Tb(4,"span",36),y.Jc(5,"\xd7"),y.Sb(),y.Sb(),y.Sb(),y.Tb(6,"div",37),y.Tb(7,"app-secteur",39),y.ec("isDone",(function(e){return y.zc(i),y.ic().onNewSecteur(e)})),y.Sb(),y.Sb()}if(2&e){var n=y.ic();y.Ab(7),y.pc("isNew",!0)("quartierId",n.quartierId)}}var et=function(){function e(e,t,i,n,o,c,a,s){this.fb=e,this.route=t,this.router=i,this.userService=n,this.localiteService=o,this.utils=c,this.snackBar=a,this.modalService=s,this.isNew=!0,this.userId=0,this.userUrl=r.b}return e.prototype.ngOnInit=function(){this.userId=this.route.snapshot.params.id,this.isNew=isNaN(this.userId),this.roles$=this.userService.getAllRoles(),this.initForm(),this.onEdit(),this.loadInfos(),this.onChangeSelectLocalite()},e.prototype.initForm=function(){this.userForm=this.fb.group({nom:["",[V.u.required,V.u.minLength(2)]],prenom:["",[V.u.required,V.u.minLength(2)]],email:["",[V.u.required,V.u.email]],region:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),prefecture:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),commune:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),quartier:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),secteur:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),telephone:["",[V.u.required,V.u.pattern(B.g)]],role:this.fb.group({id:[null,[V.u.required,V.u.pattern(B.d)]]})})},e.prototype.resetForm=function(){this.initForm(),this.userForm.markAsPristine(),this.userForm.markAsUntouched(),this.userForm.updateValueAndValidity()},e.prototype.onSubmit=function(){return ze(this,void 0,void 0,(function(){var e,t,i,n,r,o,c,a,s,u,b,l,p=this;return Qe(this,(function(f){switch(f.label){case 0:return this.userForm.invalid?[3,17]:(t=e=this.userForm.value,[4,this.userService.getOneRole(e.role.id).toPromise()]);case 1:return t.role=f.sent(),i=e,e.region?[4,this.localiteService.getOneRegion(e.region.id).toPromise()]:[3,3];case 2:return n=f.sent(),[3,4];case 3:n=null,f.label=4;case 4:return i.region=n,r=e,e.prefecture?[4,this.localiteService.getOnePrefecture(e.prefecture.id).toPromise()]:[3,6];case 5:return o=f.sent(),[3,7];case 6:o=null,f.label=7;case 7:return r.prefecture=o,c=e,e.commune?[4,this.localiteService.getOnecommune(e.commune.id).toPromise()]:[3,9];case 8:return a=f.sent(),[3,10];case 9:a=null,f.label=10;case 10:return c.commune=a,s=e,e.quartier?[4,this.localiteService.getOneQuartier(e.quartier.id).toPromise()]:[3,12];case 11:return u=f.sent(),[3,13];case 12:u=null,f.label=13;case 13:return s.quartier=u,b=e,e.secteur?[4,this.localiteService.getOneSecteur(e.secteur.id).toPromise()]:[3,15];case 14:return l=f.sent(),[3,16];case 15:l=null,f.label=16;case 16:b.secteur=l,(this.isNew?this.userService.add(e):this.userService.update(this.userId,e)).subscribe((function(){p.initLoc(),p.utils.showNotif("Operation effectu\xe9e avec succ\xe8s","success"),p.isNew?p.resetForm():p.router.navigate(["users"])}),(function(e){p.utils.showNotif("Une erreur est survenue lors de l'op\xe9ration ","danger")})),f.label=17;case 17:return[2]}}))}))},e.prototype.loadInfos=function(){this.regions$=this.localiteService.getRegions$(),this.prefectures$=this.localiteService.getPrefectures$(),this.communes$=this.localiteService.getCommunes$(),this.quartiers$=this.localiteService.getQuartiers$(),this.secteurs$=this.localiteService.getSecteurs$(),this.initLoc()},e.prototype.initLoc=function(){this.localiteService.subjectRegion.next(0),this.localiteService.subjectPrefecture.next(0),this.localiteService.subjectCommune.next(0),this.localiteService.subjectQuartier.next(0),this.localiteService.subjectSecteur.next(0)},e.prototype.onChangeSelectLocalite=function(){var e=this;this.userForm.get("region.id").valueChanges.subscribe((function(t){e.localiteService.subjectPrefecture.next(t)})),this.userForm.get("prefecture.id").valueChanges.subscribe((function(t){e.localiteService.subjectCommune.next(t)})),this.userForm.get("commune.id").valueChanges.subscribe((function(t){e.localiteService.subjectQuartier.next(t)})),this.userForm.get("quartier.id").valueChanges.subscribe((function(t){e.localiteService.subjectSecteur.next(t)}))},e.prototype.mapUser=function(){return ze(this,void 0,void 0,(function(){var e;return Qe(this,(function(t){switch(t.label){case 0:return[4,this.userService.getOne(this.userId).toPromise()];case 1:return e=t.sent(),this.userForm.patchValue({nom:e.nom,prenom:e.prenom,email:e.email,telephone:e.telephone,role:{id:e.role.id},region:e.region?{id:e.region.id}:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),prefecture:e.prefecture?{id:e.prefecture.id}:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),commune:e.commune?{id:e.commune.id}:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),quartier:e.quartier?{id:e.quartier.id}:this.fb.group({id:[null,[V.u.pattern(B.d)]]}),secteur:e.secteur?{id:e.secteur.id}:this.fb.group({id:[null,[V.u.pattern(B.d)]]})}),[2]}}))}))},e.prototype.onEdit=function(){!this.isNew&&this.userId>0&&this.mapUser()},e.prototype.onNewQuartier=function(e){e.done&&(this.localiteService.subjectQuartier.next(this.communeId),this.userForm.get("quartier.id").setValue(e.id),this.modalReference.close())},e.prototype.onNewSecteur=function(e){e.done&&(this.localiteService.subjectSecteur.next(this.quartierId),this.userForm.get("secteur.id").setValue(e.id),this.modalReference.close())},e.prototype.onOpenModal=function(e,t){if(void 0===t&&(t=!1),t){if(this.quartierId=this.userForm.get("quartier.id").value,!this.quartierId)return void this.snackBar.open("Selectionnez un quartier","",{duration:3e3,verticalPosition:"top",horizontalPosition:"right",panelClass:["my-snack-warning"]})}else if(this.communeId=this.userForm.get("commune.id").value,!this.communeId)return void this.snackBar.open("Selectionnez une commune ou sous-prefecture","",{duration:3e3,verticalPosition:"top",horizontalPosition:"right",panelClass:["my-snack-warning"]});this.modalReference=this.modalService.open(e,{backdrop:"static",centered:!0})},e.\u0275fac=function(t){return new(t||e)(y.Nb(V.c),y.Nb(w.a),y.Nb(w.e),y.Nb(r.c),y.Nb(Pe),y.Nb(A.a),y.Nb(G.a),y.Nb(oe.a))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-edit-user"]],decls:131,vars:29,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-12","form-inline"],["mat-mini-fab","","color","info","routerLink",".."],[1,"card-title","ml-1","text-white"],[1,"card-body"],[3,"filterBy","diameter"],["usrSpinner",""],[1,"col-md-8","offset-md-2","col-sm-12"],[3,"formGroup"],[1,"col-12"],["matInput","","type","text","formControlName","nom"],["matInput","","type","text","formControlName","prenom"],["matInput","","type","number","minlength","1","formControlName","telephone"],["matInput","","type","email","formControlName","email"],[1,"fieldset-border"],["formGroupName","region"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","prefecture"],["formGroupName","commune"],["formGroupName","quartier"],[1,"col-10"],[1,"col-2","form-inline"],["type","button","mat-mini-fab","","color","info",3,"click"],["formGroupName","secteur"],["formGroupName","role"],[1,"text-center"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],["contentQuartier",""],["contentSecteur",""],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"isNew","communeId","isDone"],[3,"isNew","quartierId","isDone"]],template:function(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",0),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"button",4),y.Tb(5,"mat-icon"),y.Jc(6,"reply"),y.Sb(),y.Sb(),y.Tb(7,"h2",5),y.Jc(8),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(9,"div",6),y.Ob(10,"app-spinner",7,8),y.Tb(12,"div",2),y.Tb(13,"div",9),y.Tb(14,"div"),y.Tb(15,"form",10),y.Tb(16,"div",2),y.Tb(17,"div",11),y.Tb(18,"mat-form-field"),y.Tb(19,"mat-label"),y.Jc(20,"Nom"),y.Sb(),y.Ob(21,"input",12),y.Tb(22,"mat-error"),y.Jc(23,"Le nom est obligatoire et contient au moins 3 caract\xe8res"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(24,"div",2),y.Tb(25,"div",11),y.Tb(26,"mat-form-field"),y.Tb(27,"mat-label"),y.Jc(28,"Prenom"),y.Sb(),y.Ob(29,"input",13),y.Tb(30,"mat-error"),y.Jc(31,"Le prenom est obligatoire et contient au moins 3 caract\xe8res"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(32,"div",2),y.Tb(33,"div",11),y.Tb(34,"mat-form-field"),y.Tb(35,"mat-label"),y.Jc(36,"Telephone"),y.Sb(),y.Ob(37,"input",14),y.Tb(38,"mat-error"),y.Jc(39,"le numero de telephone est incorrect"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(40,"div",2),y.Tb(41,"div",11),y.Tb(42,"mat-form-field"),y.Tb(43,"mat-label"),y.Jc(44,"Email"),y.Sb(),y.Ob(45,"input",15),y.Tb(46,"mat-error"),y.Jc(47,"L'adresse email est obligatoire et doit respecter le bon format"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(48,"fieldset",16),y.Tb(49,"legend",16),y.Jc(50,"Localit\xe9"),y.Sb(),y.Tb(51,"div"),y.Tb(52,"div",17),y.Tb(53,"div",2),y.Tb(54,"div",11),y.Tb(55,"mat-form-field"),y.Tb(56,"mat-label"),y.Jc(57,"Region"),y.Sb(),y.Tb(58,"mat-select",18),y.Hc(59,Ke,2,2,"mat-option",19),y.jc(60,"async"),y.Sb(),y.Tb(61,"mat-error"),y.Jc(62,"La region est obligatoire"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(63,"div",20),y.Tb(64,"div",2),y.Tb(65,"div",11),y.Tb(66,"mat-form-field"),y.Tb(67,"mat-label"),y.Jc(68,"Prefecture"),y.Sb(),y.Tb(69,"mat-select",18),y.Hc(70,Ve,2,2,"mat-option",19),y.jc(71,"async"),y.Sb(),y.Tb(72,"mat-error"),y.Jc(73,"La prefecture est obligatoire"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(74,"div",21),y.Tb(75,"div",2),y.Tb(76,"div",11),y.Tb(77,"mat-form-field"),y.Tb(78,"mat-label"),y.Jc(79,"Commune/Sous-prefecture"),y.Sb(),y.Tb(80,"mat-select",18),y.Hc(81,Be,2,2,"mat-option",19),y.jc(82,"async"),y.Sb(),y.Tb(83,"mat-error"),y.Jc(84,"La commune ou sous-prefecture est obligatoire"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(85,"div",22),y.Tb(86,"div",2),y.Tb(87,"div",23),y.Tb(88,"mat-form-field"),y.Tb(89,"mat-label"),y.Jc(90,"Quartier/Districte"),y.Sb(),y.Tb(91,"mat-select",18),y.Hc(92,Ge,2,2,"mat-option",19),y.jc(93,"async"),y.Sb(),y.Sb(),y.Sb(),y.Tb(94,"div",24),y.Tb(95,"button",25),y.ec("click",(function(){y.zc(i);var e=y.xc(128);return t.onOpenModal(e)})),y.Tb(96,"mat-icon"),y.Jc(97,"add"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(98,"div",26),y.Tb(99,"div",2),y.Tb(100,"div",23),y.Tb(101,"mat-form-field"),y.Tb(102,"mat-label"),y.Jc(103,"Secteur"),y.Sb(),y.Tb(104,"mat-select",18),y.Hc(105,We,2,2,"mat-option",19),y.jc(106,"async"),y.Sb(),y.Sb(),y.Sb(),y.Tb(107,"div",24),y.Tb(108,"button",25),y.ec("click",(function(){y.zc(i);var e=y.xc(130);return t.onOpenModal(e,!0)})),y.Tb(109,"mat-icon"),y.Jc(110,"add"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(111,"div",27),y.Tb(112,"div",2),y.Tb(113,"div",11),y.Tb(114,"mat-form-field"),y.Tb(115,"mat-label"),y.Jc(116,"Role"),y.Sb(),y.Tb(117,"mat-select",18),y.Hc(118,Xe,3,5,"mat-option",19),y.jc(119,"async"),y.Sb(),y.Tb(120,"mat-error"),y.Jc(121,"Le role est obligatoire"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(122,"div",28),y.Tb(123,"button",29),y.ec("click",(function(){return t.onSubmit()})),y.jc(124,"async"),y.jc(125,"async"),y.Jc(126," Enregistrer "),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Hc(127,Ye,8,2,"ng-template",null,30,y.Ic),y.Hc(129,Ze,8,2,"ng-template",null,31,y.Ic)}if(2&e){var n=y.xc(11);y.Ab(8),y.Lc(" ",t.isNew?"Enregistrement d'un utilisateur":"Modification d'un utilisateur"," "),y.Ab(2),y.pc("filterBy",t.userUrl)("diameter",30),y.Ab(5),y.pc("formGroup",t.userForm),y.Ab(44),y.pc("ngForOf",y.kc(60,13,t.regions$)),y.Ab(11),y.pc("ngForOf",y.kc(71,15,t.prefectures$)),y.Ab(11),y.pc("ngForOf",y.kc(82,17,t.communes$)),y.Ab(11),y.pc("ngForOf",y.kc(93,19,t.quartiers$)),y.Ab(13),y.pc("ngForOf",y.kc(106,21,t.secteurs$)),y.Ab(13),y.pc("ngForOf",y.kc(119,23,t.roles$)),y.Ab(5),y.Fb("spinner",y.kc(124,25,n.loadingEvent$)),y.pc("disabled",t.userForm.invalid||y.kc(125,27,n.loadingEvent$))}},directives:[k.a,w.f,I.a,x,V.w,V.m,V.e,W.c,W.f,X.a,V.b,V.l,V.d,W.b,V.q,V.h,V.f,je.a,n.l,Le.j,Me,qe],pipes:[n.b,ce],styles:['.mat-form-field[_ngcontent-%COMP%]{font-size:17px;width:100%}@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}']}),e}(),tt=i("+0xr"),it=i("M9IT"),nt=i("Dh3D"),rt=i("7EHt");function ot(e,t){if(1&e&&(y.Tb(0,"mat-option",14),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function ct(e,t){if(1&e&&(y.Tb(0,"mat-option",14),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function at(e,t){if(1&e&&(y.Tb(0,"mat-option",14),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function st(e,t){if(1&e&&(y.Tb(0,"mat-option",14),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function ut(e,t){if(1&e&&(y.Tb(0,"mat-option",14),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.id),y.Ab(1),y.Kc(i.nom)}}function bt(e,t){if(1&e&&(y.Tb(0,"mat-option",14),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.pc("value",i.nom),y.Ab(1),y.Kc(i.nom)}}var lt=function(){function e(e,t){this.localiteService=e,this.UserService=t,this.isLoading=!1,this.expanded=!1,this.onSearchEvent=new y.o,this.panelOpenState=!1,this.localites=B.a}return e.prototype.ngOnInit=function(){this.params={dateDebut:null,dateFin:null},this.loadLocaliteInfos()},e.prototype.loadLocaliteInfos=function(){this.regions$=this.localiteService.getRegions$(),this.prefectures$=this.localiteService.getPrefectures$(),this.communes$=this.localiteService.getCommunes$(),this.quartiers$=this.localiteService.getQuartiers$(),this.secteurs$=this.localiteService.getSecteurs$(),this.roles$=this.UserService.getAllRoles().toPromise(),this.localiteService.subjectRegion.next(0),this.localiteService.subjectPrefecture.next(0),this.localiteService.subjectCommune.next(0),this.localiteService.subjectQuartier.next(0),this.localiteService.subjectSecteur.next(0)},e.prototype.onSelectLocaliteChange=function(e){e===B.a.REGION?this.localiteService.subjectPrefecture.next(this.params.idRegion):e===B.a.PREFECTURE?this.localiteService.subjectCommune.next(this.params.idPrefecture):e===B.a.COMMUNE?this.localiteService.subjectQuartier.next(this.params.idCommune):e===B.a.QUARTIER&&this.localiteService.subjectSecteur.next(this.params.idQuartier)},e.prototype.onSearch=function(){this.params&&this.onSearchEvent.emit(this.params)},e.prototype.resetForm=function(){this.params={}},e.\u0275fac=function(t){return new(t||e)(y.Nb(Pe),y.Nb(r.c))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-search-local"]],inputs:{isLoading:"isLoading",expanded:"expanded"},outputs:{onSearchEvent:"onSearchEvent"},decls:61,vars:26,consts:[[1,"row"],[1,"col-12"],[3,"expanded","opened","closed"],[1,"col-md-4","col-sm-12"],["name","region",3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","prefecture",3,"ngModel","selectionChange","ngModelChange"],["name","commune",3,"ngModel","selectionChange","ngModelChange"],["name","quartier",3,"ngModel","selectionChange","ngModelChange"],["name","secteur",3,"ngModel","ngModelChange"],["name","role",3,"ngModel","ngModelChange"],[1,"col-md-4","col-sm-12","form-inline"],["type","button","mat-raised-button","","color","info",1,"mr-1",3,"disabled","click"],["type","button","mat-raised-button","",3,"click"],[3,"value"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"div",1),y.Tb(2,"mat-accordion"),y.Tb(3,"mat-expansion-panel",2),y.ec("opened",(function(){return t.panelOpenState=!0}))("closed",(function(){return t.panelOpenState=!1})),y.Tb(4,"mat-expansion-panel-header"),y.Tb(5,"mat-panel-title"),y.Jc(6,"Recherche"),y.Sb(),y.Sb(),y.Tb(7,"form"),y.Tb(8,"div",0),y.Tb(9,"div",3),y.Tb(10,"mat-form-field"),y.Tb(11,"mat-label"),y.Jc(12,"Region"),y.Sb(),y.Tb(13,"mat-select",4),y.ec("selectionChange",(function(){return t.onSelectLocaliteChange(t.localites.REGION)}))("ngModelChange",(function(e){return t.params.idRegion=e})),y.Hc(14,ot,2,2,"mat-option",5),y.jc(15,"async"),y.Sb(),y.Sb(),y.Sb(),y.Tb(16,"div",3),y.Tb(17,"mat-form-field"),y.Tb(18,"mat-label"),y.Jc(19,"Prefecture"),y.Sb(),y.Tb(20,"mat-select",6),y.ec("selectionChange",(function(){return t.onSelectLocaliteChange(t.localites.PREFECTURE)}))("ngModelChange",(function(e){return t.params.idPrefecture=e})),y.Hc(21,ct,2,2,"mat-option",5),y.jc(22,"async"),y.Sb(),y.Sb(),y.Sb(),y.Tb(23,"div",3),y.Tb(24,"mat-form-field"),y.Tb(25,"mat-label"),y.Jc(26,"Commune/Sous-prefecture"),y.Sb(),y.Tb(27,"mat-select",7),y.ec("selectionChange",(function(){return t.onSelectLocaliteChange(t.localites.COMMUNE)}))("ngModelChange",(function(e){return t.params.idCommune=e})),y.Hc(28,at,2,2,"mat-option",5),y.jc(29,"async"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(30,"div",0),y.Tb(31,"div",3),y.Tb(32,"mat-form-field"),y.Tb(33,"mat-label"),y.Jc(34,"Quartier/District"),y.Sb(),y.Tb(35,"mat-select",8),y.ec("selectionChange",(function(){return t.onSelectLocaliteChange(t.localites.QUARTIER)}))("ngModelChange",(function(e){return t.params.idQuartier=e})),y.Hc(36,st,2,2,"mat-option",5),y.jc(37,"async"),y.Sb(),y.Sb(),y.Sb(),y.Tb(38,"div",3),y.Tb(39,"mat-form-field"),y.Tb(40,"mat-label"),y.Jc(41,"Secteur"),y.Sb(),y.Tb(42,"mat-select",9),y.ec("ngModelChange",(function(e){return t.params.idSecteur=e})),y.Hc(43,ut,2,2,"mat-option",5),y.jc(44,"async"),y.Sb(),y.Sb(),y.Sb(),y.Tb(45,"div",3),y.Tb(46,"mat-form-field"),y.Tb(47,"mat-label"),y.Jc(48,"Role"),y.Sb(),y.Tb(49,"mat-select",10),y.ec("ngModelChange",(function(e){return t.params.role=e})),y.Hc(50,bt,2,2,"mat-option",5),y.jc(51,"async"),y.Sb(),y.Sb(),y.Sb(),y.Tb(52,"div",11),y.Tb(53,"button",12),y.ec("click",(function(){return t.onSearch()})),y.Tb(54,"mat-icon"),y.Jc(55,"search"),y.Sb(),y.Jc(56," Rechercher "),y.Sb(),y.Tb(57,"button",13),y.ec("click",(function(){return t.resetForm()})),y.Tb(58,"mat-icon"),y.Jc(59,"restart_alt"),y.Sb(),y.Jc(60," Annuler "),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb()),2&e&&(y.Ab(3),y.pc("expanded",t.expanded),y.Ab(10),y.pc("ngModel",t.params.idRegion),y.Ab(1),y.pc("ngForOf",y.kc(15,14,t.regions$)),y.Ab(6),y.pc("ngModel",t.params.idPrefecture),y.Ab(1),y.pc("ngForOf",y.kc(22,16,t.prefectures$)),y.Ab(6),y.pc("ngModel",t.params.idCommune),y.Ab(1),y.pc("ngForOf",y.kc(29,18,t.communes$)),y.Ab(7),y.pc("ngModel",t.params.idQuartier),y.Ab(1),y.pc("ngForOf",y.kc(37,20,t.quartiers$)),y.Ab(6),y.pc("ngModel",t.params.idSecteur),y.Ab(1),y.pc("ngForOf",y.kc(44,22,t.secteurs$)),y.Ab(6),y.pc("ngModel",t.params.role),y.Ab(1),y.pc("ngForOf",y.kc(51,24,t.roles$)),y.Ab(3),y.pc("disabled",t.isLoading))},directives:[rt.a,rt.c,rt.d,rt.e,V.w,V.m,V.n,W.c,W.f,je.a,V.l,V.o,n.l,k.a,I.a,Le.j],pipes:[n.b],styles:[""]}),e}(),pt=function(){function e(){}return e.prototype.transform=function(e){if(e)return e>100?[5,10,25,50,e]:[5,10,25,50]},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=y.Mb({name:"tableOptions",type:e,pure:!0}),e}(),ft=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},dt=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function c(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},mt=function(e,t){var i,n,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(a){o=[6,a],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function ht(e,t){1&e&&(y.Tb(0,"button",14),y.Tb(1,"mat-icon"),y.Jc(2,"add"),y.Sb(),y.Sb())}function vt(e,t){1&e&&(y.Tb(0,"mat-header-cell",32),y.Tb(1,"strong"),y.Jc(2,"EMAIL"),y.Sb(),y.Sb())}function St(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.Ab(1),y.Kc(i.email)}}function gt(e,t){1&e&&(y.Tb(0,"mat-header-cell",32),y.Tb(1,"strong"),y.Jc(2,"NOM et PRENOM"),y.Sb(),y.Sb())}function Tt(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.Ab(1),y.Mc("",i.nom," ",i.prenom,"")}}function yt(e,t){1&e&&(y.Tb(0,"mat-header-cell",32),y.Tb(1,"strong"),y.Jc(2,"TELEPHONE"),y.Sb(),y.Sb())}function wt(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Jc(1),y.Sb()),2&e){var i=t.$implicit;y.Ab(1),y.Kc(i.telephone)}}function At(e,t){1&e&&(y.Tb(0,"mat-header-cell",32),y.Tb(1,"strong"),y.Jc(2,"ROLE"),y.Sb(),y.Sb())}function kt(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Jc(1),y.jc(2,"roleNameFormat"),y.Sb()),2&e){var i=t.$implicit;y.Ab(1),y.Kc(y.lc(2,1,i.role.nom,i.role.nom))}}function It(e,t){1&e&&(y.Tb(0,"mat-header-cell",32),y.Tb(1,"strong"),y.Jc(2,"STATUT"),y.Sb(),y.Sb())}function Ot(e,t){if(1&e){var i=y.Ub();y.Tb(0,"mat-cell"),y.Tb(1,"mat-slide-toggle",33),y.ec("change",(function(){y.zc(i);var e=t.$implicit;return y.ic(3).onChangeStatus(e.id)})),y.Sb(),y.Sb()}if(2&e){var n=t.$implicit;y.Ab(1),y.pc("checked","Activated"===n.statut)}}function Jt(e,t){1&e&&(y.Tb(0,"mat-header-cell",32),y.Tb(1,"strong"),y.Jc(2,"OPTIONS"),y.Sb(),y.Sb())}var Ct=function(e){return["info",e]};function Nt(e,t){if(1&e&&(y.Tb(0,"button",37),y.Tb(1,"mat-icon"),y.Jc(2,"visibility"),y.Sb(),y.Sb()),2&e){var i=y.ic().$implicit;y.pc("routerLink",y.tc(1,Ct,i.id))}}var xt=function(e){return{id:e}},Ft=function(e){return["edit",e]};function Rt(e,t){if(1&e&&(y.Tb(0,"button",38),y.Tb(1,"mat-icon"),y.Jc(2,"edit"),y.Sb(),y.Sb()),2&e){var i=y.ic().$implicit;y.pc("routerLink",y.tc(3,Ft,y.tc(1,xt,i.id)))}}function Pt(e,t){if(1&e){var i=y.Ub();y.Tb(0,"button",39),y.ec("click",(function(){y.zc(i);var e=y.ic().$implicit,t=y.ic(3),n=y.xc(17);return t.openModalReinitialisationPassword(n,e)})),y.Tb(1,"mat-icon"),y.Jc(2,"autorenew"),y.Sb(),y.Sb()}}function jt(e,t){if(1&e&&(y.Tb(0,"mat-cell"),y.Hc(1,Nt,3,3,"button",34),y.Hc(2,Rt,3,5,"button",35),y.Hc(3,Pt,3,0,"button",36),y.Sb()),2&e){var i=y.ic(3);y.Ab(1),y.pc("ngIf",i.permissions.can_view_info),y.Ab(1),y.pc("ngIf",i.permissions.can_edit),y.Ab(1),y.pc("ngIf",i.permissions.can_edit)}}function Lt(e,t){1&e&&y.Ob(0,"mat-header-row")}function Et(e,t){1&e&&y.Ob(0,"mat-row")}function _t(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div"),y.Tb(1,"div",16),y.Tb(2,"div",17),y.Tb(3,"mat-form-field"),y.Tb(4,"input",18),y.ec("keyup",(function(e){return y.zc(i),y.ic(2).applyFilter(e.target.value)})),y.Sb(),y.Sb(),y.Sb(),y.Tb(5,"mat-table",19),y.Rb(6,20),y.Hc(7,vt,3,0,"mat-header-cell",21),y.Hc(8,St,2,1,"mat-cell",22),y.Qb(),y.Rb(9,23),y.Hc(10,gt,3,0,"mat-header-cell",21),y.Hc(11,Tt,2,2,"mat-cell",22),y.Qb(),y.Rb(12,24),y.Hc(13,yt,3,0,"mat-header-cell",21),y.Hc(14,wt,2,1,"mat-cell",22),y.Qb(),y.Rb(15,25),y.Hc(16,At,3,0,"mat-header-cell",21),y.Hc(17,kt,3,4,"mat-cell",22),y.Qb(),y.Rb(18,26),y.Hc(19,It,3,0,"mat-header-cell",21),y.Hc(20,Ot,2,1,"mat-cell",22),y.Qb(),y.Rb(21,27),y.Hc(22,Jt,3,0,"mat-header-cell",21),y.Hc(23,jt,4,3,"mat-cell",22),y.Qb(),y.Hc(24,Lt,1,0,"mat-header-row",28),y.Hc(25,Et,1,0,"mat-row",29),y.Sb(),y.Tb(26,"mat-paginator",30,31),y.ec("page",(function(e){return y.zc(i),y.ic(2).pageChanged(e)})),y.jc(28,"tableOptions"),y.Sb(),y.Sb(),y.Sb()}if(2&e){var n=y.ic(2);y.Ab(1),y.pc("hidden",!n.dataSource||0===n.dataSource.data.length),y.Ab(4),y.pc("dataSource",n.dataSource),y.Ab(19),y.pc("matHeaderRowDef",n.displayedColumns),y.Ab(1),y.pc("matRowDefColumns",n.displayedColumns),y.Ab(1),y.pc("length",n.totalRows)("pageIndex",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",y.kc(28,8,n.dataSource.data.length))}}function $t(e,t){1&e&&(y.Tb(0,"div",40),y.Jc(1," Aucun cas trouv\xe9 !!! "),y.Sb())}function Mt(e,t){if(1&e&&(y.Tb(0,"div"),y.Hc(1,_t,29,10,"div",12),y.Hc(2,$t,2,0,"div",15),y.jc(3,"async"),y.Sb()),2&e){var i=y.ic();y.Ab(1),y.pc("ngIf",i.dataSource.data.length>0),y.Ab(1),y.pc("ngIf",0===i.dataSource.data.length&&!1===y.kc(3,2,i.spinner.loadingEvent$))}}function Ht(e,t){if(1&e){var i=y.Ub();y.Tb(0,"div",41),y.Tb(1,"span",42),y.Jc(2,"R\xe9initialisation mot de passe"),y.Sb(),y.Tb(3,"button",43),y.ec("click",(function(){return(0,t.close)("Close click")})),y.Tb(4,"span",44),y.Jc(5,"\xd7"),y.Sb(),y.Sb(),y.Sb(),y.Tb(6,"div",45),y.Tb(7,"form",46),y.Tb(8,"div",2),y.Tb(9,"div",47),y.Tb(10,"mat-form-field"),y.Tb(11,"mat-label"),y.Jc(12,"Option"),y.Sb(),y.Tb(13,"mat-select",48),y.Tb(14,"mat-option",49),y.Jc(15,"SMS"),y.Sb(),y.Tb(16,"mat-option",50),y.Jc(17,"EMAIL"),y.Sb(),y.Sb(),y.Tb(18,"mat-error"),y.Jc(19,"L'option d'envoi est obligatoire"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(20,"div",51),y.Tb(21,"p",52),y.Jc(22),y.Sb(),y.Tb(23,"button",53),y.ec("click",(function(){return y.zc(i),y.ic().onCloseModal()})),y.Jc(24," Annuler "),y.Sb(),y.Tb(25,"button",54),y.ec("click",(function(){return y.zc(i),y.ic().onReinitialisationPassword()})),y.Jc(26," R\xe9initialiser "),y.Sb(),y.Sb(),y.Sb(),y.Sb()}if(2&e){var n=y.ic();y.Ab(7),y.pc("formGroup",n.reinitialisationForm),y.Ab(15),y.Kc(n.messageAttente),y.Ab(3),y.pc("disabled",n.reinitialisationForm.invalid)}}var Ut=function(){function e(e,t,i,n,o,c){this.userService=e,this.auth=t,this.utils=i,this.fb=n,this.modalService=o,this.cdrf=c,this.subject=new a.a(0),this.pageSize=10,this.currentPage=0,this.totalRows=0,this.permissions={can_add:!1,can_edit:!1,can_delete:!1,can_view_info:!1},this.userUrl=r.b,this.userId=0,this.messageAttente="",this.displayedColumns=["nom_prenom","email","telephone","role","statut","option"],this.dataSource=new tt.k([])}return e.prototype.getElement=function(e){return void 0===e&&(e={page:this.currentPage,size:this.pageSize}),dt(this,void 0,void 0,(function(){var t=this;return mt(this,(function(i){return this.userService.getAll(e).subscribe((function(e){var i=e.data.map((function(i){return t.totalRows=e.totalItem,{id:i.id,nom:i.nom,prenom:i.prenom,email:i.email,localite:i.localite,telephone:i.telephone,username:i.username,password:i.password,statut:i.statut,role:i.role,fonction:i.fonction}}),(function(e){console.log("error: ",e)}));t.dataSource.data=i,setTimeout((function(){t.paginator.pageIndex=t.currentPage,t.paginator.length=t.totalRows})),t.dataSource._updateChangeSubscription(),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort})),[2]}))}))},e.prototype.ngAfterViewInit=function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},e.prototype.ngAfterContentChecked=function(){this.cdrf.detectChanges()},e.prototype.ngOnInit=function(){this.setPermissions(),this.getElement(),this.reinitialisationForm=this.fb.group({mode:["",[V.u.required]]})},e.prototype.onRefresh=function(){this.dataSource.data=[],this.getElement()},e.prototype.onDelete=function(e){var t=this;this.userService.delete(e).subscribe((function(){t.utils.showNotif("Utilisateur supprim\xe9 avec succ\xe8s ","success"),t.onRefresh()}),(function(e){t.utils.showNotif("Une erreur est survenue lors de l'operation "+e,"danger")}))},e.prototype.setPermissions=function(){var e=this.auth.getPermissions();this.permissions={can_add:e.includes(B.b.CAN_ADD_USER),can_edit:e.includes(B.b.CAN_UPDATE_USER),can_delete:e.includes(B.b.CAN_DELETE_USER),can_view_info:e.includes(B.b.CAN_DELETE_USER)}},e.prototype.onChangeStatus=function(e){var t=this;this.userService.changeStatus(e).subscribe((function(){return t.subject.next(0)}))},e.prototype.openModalReinitialisationPassword=function(e,t){this.userId=t.id,this.modalRef=this.modalService.open(e,{backdrop:"static"})},e.prototype.onReinitialisationPassword=function(){return dt(this,void 0,void 0,(function(){var e=this;return mt(this,(function(t){return this.messageAttente="Veillez patienter pendant la g\xe9n\xe9ration du nouveau mot de passe",this.userService.reinitialisationPassword({idUser:this.userId,option:this.reinitialisationForm.value.mode}).subscribe((function(t){e.messageAttente="",e.onCloseModal();var i=t.status;return v.a.fire({title:"R\xe9initialisation mot de passe",icon:i?"success":"error",text:i?"Le mot de passe a \xe9t\xe9 r\xe9initiali\xe9 avec succ\xe8s":"Une erreur s'est produite",showConfirmButton:!0})})),[2]}))}))},e.prototype.onCloseModal=function(){this.modalRef.close()},e.prototype.applyFilter=function(e){e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e},e.prototype.onSearch=function(e){e&&(e.page=0,e.size=10,console.log("Params ",e),this.getElement(e))},e.prototype.iniData=function(e){return void 0===e&&(e={page:this.currentPage,size:this.pageSize}),dt(this,void 0,void 0,(function(){return mt(this,(function(e){return[2]}))}))},e.prototype.pageChanged=function(e){console.log({event:e}),this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this.totalRows=e.length,this.getElement({page:this.currentPage,size:this.pageSize})},e.\u0275fac=function(t){return new(t||e)(y.Nb(r.c),y.Nb(re.a),y.Nb(A.a),y.Nb(V.c),y.Nb(oe.a),y.Nb(y.h))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-list-user"]],viewQuery:function(e,t){var i;1&e&&(y.Nc(it.a,!0),y.Nc(nt.a,!0)),2&e&&(y.wc(i=y.fc())&&(t.paginator=i.first),y.wc(i=y.fc())&&(t.sort=i.first))},decls:18,vars:3,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-8"],[1,"card-title","text-white"],[1,"nc-icon","nc-single-02"],[1,"col-sm-4","text-right","mt-2"],["mat-raised-button","","routerLink","edit","class","mr-1","color","info",4,"ngIf"],["mat-raised-button","","color","info",3,"click"],[3,"onSearchEvent"],[1,"card-body"],[3,"filterBy"],[4,"ngIf"],["reinitialisationPassword",""],["mat-raised-button","","routerLink","edit","color","info",1,"mr-1"],["class","text-info text-center mt-2",4,"ngIf"],[1,"table-responsive","mb-2",3,"hidden"],[1,"mat-table-header"],["matInput","","placeholder","Rechercher",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","email"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nom_prenom"],["matColumnDef","telephone"],["matColumnDef","role"],["matColumnDef","statut"],["matColumnDef","option"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-sort-header",""],["color","primary",3,"checked","change"],["mat-mini-fab","","color","own",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","info",3,"routerLink",4,"ngIf"],["type","button","mat-mini-fab","","color","warning",3,"click",4,"ngIf"],["mat-mini-fab","","color","own",3,"routerLink"],["mat-mini-fab","","color","info",3,"routerLink"],["type","button","mat-mini-fab","","color","warning",3,"click"],[1,"text-info","text-center","mt-2"],[1,"modal-header","bg-default"],[1,"modal-title","h4","text-white"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"col-12"],["formControlName","mode"],["value","SMS"],["value","EMAIL"],[1,"text-center"],[1,"text","text-warning",2,"font-weight","bold"],["type","button","color","danger",1,"btn","btn-danger",3,"click"],["type","button","mat-raised-button","","color","primary",2,"margin-left","10px",3,"disabled","click"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"div",1),y.Tb(2,"div",2),y.Tb(3,"div",3),y.Tb(4,"h2",4),y.Ob(5,"i",5),y.Jc(6," Liste des utilisateurs "),y.Sb(),y.Sb(),y.Tb(7,"div",6),y.Hc(8,ht,3,0,"button",7),y.Tb(9,"button",8),y.ec("click",(function(){return t.onRefresh()})),y.Tb(10,"mat-icon"),y.Jc(11,"refresh"),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Sb(),y.Tb(12,"app-search-local",9),y.ec("onSearchEvent",(function(e){return t.onSearch(e)})),y.Sb(),y.Tb(13,"div",10),y.Ob(14,"app-spinner",11),y.Hc(15,Mt,4,4,"div",12),y.Sb(),y.Sb(),y.Hc(16,Ht,27,3,"ng-template",null,13,y.Ic)),2&e&&(y.Ab(8),y.pc("ngIf",t.permissions.can_add),y.Ab(6),y.pc("filterBy",t.userUrl),y.Ab(1),y.pc("ngIf",t.dataSource.data.length))},directives:[n.m,k.a,I.a,lt,x,w.f,W.c,X.a,tt.j,nt.a,tt.c,tt.e,tt.b,tt.g,tt.i,it.a,tt.d,nt.b,tt.a,F.a,tt.f,tt.h,V.w,V.m,V.e,W.f,je.a,V.l,V.d,Le.j,W.b],pipes:[n.b,pt,ce],styles:[""]}),function(e,t,i,n){var r,o=arguments.length,c=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(o<3?r(c):o>3?r(t,i,c):r(t,i))||c);o>3&&c&&Object.defineProperty(t,i,c)}([T({html:"Voulez-vous supprimer cet utilisateur ?",icon:"warning"}),ft("design:type",Function),ft("design:paramtypes",[Number]),ft("design:returntype",void 0)],e.prototype,"onDelete",null),e}(),Dt=function(e){return{active:e}};function qt(e,t){if(1&e&&(y.Tb(0,"button",10),y.Jc(1,"Utilisateurs"),y.Sb()),2&e){y.ic();var i=y.xc(5),n=y.xc(7),r=y.xc(9);y.pc("ngClass",y.tc(1,Dt,i.isActive||n.isActive||r.isActive))}}function zt(e,t){1&e&&(y.Tb(0,"button",11),y.Jc(1,"Roles"),y.Sb())}var Qt=function(){return{exact:!0}},Kt=function(){function e(e){this.auth=e,this.permissions={can_view_user_list:!1,can_view_role_list:!1}}return e.prototype.ngOnInit=function(){this.setPermissions()},e.prototype.setPermissions=function(){var e=this.auth.getPermissions();this.permissions={can_view_user_list:e.includes(B.b.CAN_VIEW_USERS_LIST),can_view_role_list:e.includes(B.b.CAN_VIEW_ROLES_LIST)}},e.\u0275fac=function(t){return new(t||e)(y.Nb(re.a))},e.\u0275cmp=y.Hb({type:e,selectors:[["app-user-management"]],decls:11,vars:6,consts:[[1,"main-content"],[1,"text-center","bg-dark-gray","m-3"],["mat-button","","routerLink","/users","routerLinkActive","active",3,"ngClass",4,"ngIf"],["mat-button","","routerLink","roles","routerLinkActive","active",4,"ngIf"],["routerLink","edit","routerLinkActive","",2,"display","none",3,"routerLinkActiveOptions"],["editUserActive","routerLinkActive"],["routerLink","/users","routerLinkActive","",2,"display","none",3,"routerLinkActiveOptions"],["listUser","routerLinkActive"],["routerLink","info","routerLinkActive","",2,"display","none"],["infoUserActive","routerLinkActive"],["mat-button","","routerLink","/users","routerLinkActive","active",3,"ngClass"],["mat-button","","routerLink","roles","routerLinkActive","active"]],template:function(e,t){1&e&&(y.Tb(0,"div",0),y.Tb(1,"div",1),y.Hc(2,qt,2,3,"button",2),y.Hc(3,zt,2,0,"button",3),y.Ob(4,"a",4,5),y.Ob(6,"a",6,7),y.Ob(8,"a",8,9),y.Sb(),y.Ob(10,"router-outlet"),y.Sb()),2&e&&(y.Ab(2),y.pc("ngIf",t.permissions.can_view_user_list),y.Ab(1),y.pc("ngIf",t.permissions.can_view_role_list),y.Ab(1),y.pc("routerLinkActiveOptions",y.sc(4,Qt)),y.Ab(2),y.pc("routerLinkActiveOptions",y.sc(5,Qt)))},directives:[n.m,w.h,w.g,w.j,k.a,w.f,n.k],styles:[".active[_ngcontent-%COMP%]{background-color:#66615b!important;color:#f5f5f5!important}button[routerlink][_ngcontent-%COMP%]{font-size:20px}"]}),e}(),Vt=i("p+2o"),Bt=[{path:"",component:Kt,children:[{path:"",component:Ut,canActivate:[Vt.a],data:{permissions:B.b.CAN_VIEW_USERS_LIST}},{path:"edit",component:et,canActivate:[Vt.a],data:{permissions:B.b.CAN_ADD_USER}},{path:"info/:id",component:K,canActivate:[Vt.a],data:{permissions:B.b.CAN_VIEW_USER_INFO}},{path:"roles",children:[{path:"",component:ye,canActivate:[Vt.a],data:{permissions:B.b.CAN_VIEW_ROLES_LIST}},{path:"edit",component:ne,canActivate:[Vt.a],data:{permissions:B.b.CAN_ADD_ROLE}}]}]}],Gt=function(){function e(){}return e.\u0275mod=y.Lb({type:e}),e.\u0275inj=y.Kb({factory:function(t){return new(t||e)},imports:[[w.i.forChild(Bt)],w.i]}),e}(),Wt=i("iYTy"),Xt=i("Vm88"),Yt=function(){function e(){}return e.\u0275mod=y.Lb({type:e}),e.\u0275inj=y.Kb({factory:function(t){return new(t||e)},providers:[ce],imports:[[n.c,Gt,V.s,Xt.a,V.g,Wt.a,oe.b]]}),e}()}}]);