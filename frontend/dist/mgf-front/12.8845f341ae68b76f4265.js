(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{c48k:function(t,e,n){"use strict";n.r(e),n.d(e,"GestionProduitModule",(function(){return it}));var i=n("ofXK"),o=n("1kSV"),c=n("tyNb"),a=n("p+2o"),r=n("fXoL"),s=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-gestion-produit"]],decls:2,vars:0,consts:[[1,"main-content"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Ob(1,"router-outlet"),r.Sb())},directives:[c.j],styles:[""]}),t}(),u=n("3Pt+"),l=n("M9IT"),p=n("Dh3D"),b=n("+0xr"),d=n("6vGg"),f=n("d414"),m=n("2Vo4"),h=n("0z96"),g=n("Edwt"),S=n("9qFf"),v=n("D7GG"),T=n("bTqV"),y=n("NFeN"),w=n("8THJ"),I=n("kmnG"),A=n("qFsG"),R=n("0Sq8"),D=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function _(t,e){1&t&&(r.Tb(0,"button",12),r.Tb(1,"mat-icon"),r.Jc(2,"add"),r.Sb(),r.Sb())}function C(t,e){1&t&&(r.Tb(0,"mat-header-cell",31),r.Tb(1,"strong"),r.Jc(2,"NOM PRODUIT"),r.Sb(),r.Sb())}function O(t,e){if(1&t&&(r.Tb(0,"mat-cell"),r.Jc(1),r.Sb()),2&t){var n=e.$implicit;r.Ab(1),r.Kc(n.nom)}}function P(t,e){1&t&&(r.Tb(0,"mat-header-cell",31),r.Tb(1,"strong"),r.Jc(2,"PRIX UNITAIRE"),r.Sb(),r.Sb())}function N(t,e){if(1&t&&(r.Tb(0,"mat-cell"),r.Jc(1),r.Sb()),2&t){var n=e.$implicit;r.Ab(1),r.Kc(n.prixUnit)}}function H(t,e){1&t&&(r.Tb(0,"mat-header-cell",31),r.Tb(1,"strong"),r.Jc(2,"POIDS"),r.Sb(),r.Sb())}function k(t,e){if(1&t&&(r.Tb(0,"mat-cell"),r.Jc(1),r.Sb()),2&t){var n=e.$implicit;r.Ab(1),r.Kc(n.poids)}}function E(t,e){1&t&&(r.Tb(0,"mat-header-cell",31),r.Tb(1,"strong"),r.Jc(2,"CATEGORIE"),r.Sb(),r.Sb())}function J(t,e){if(1&t&&(r.Tb(0,"mat-cell"),r.Jc(1),r.Sb()),2&t){var n=e.$implicit;r.Ab(1),r.Kc(n.categorie.libelle)}}function U(t,e){1&t&&(r.Tb(0,"mat-header-cell",31),r.Tb(1,"strong"),r.Jc(2,"GROUPEMENT"),r.Sb(),r.Sb())}function x(t,e){if(1&t&&(r.Tb(0,"mat-cell"),r.Jc(1),r.Sb()),2&t){var n=e.$implicit;r.Ab(1),r.Kc(n.groupement.nom)}}function z(t,e){1&t&&(r.Tb(0,"mat-header-cell",31),r.Tb(1,"strong"),r.Jc(2,"DESCRIPTION"),r.Sb(),r.Sb())}function L(t,e){if(1&t&&(r.Tb(0,"mat-cell"),r.Jc(1),r.Sb()),2&t){var n=e.$implicit;r.Ab(1),r.Kc(n.description)}}function j(t,e){1&t&&(r.Tb(0,"mat-header-cell",31),r.Tb(1,"strong"),r.Jc(2,"OPTIONS"),r.Sb(),r.Sb())}var V=function(t){return{id:t}},G=function(t){return["edit",t]};function K(t,e){if(1&t&&(r.Tb(0,"button",34),r.Tb(1,"mat-icon"),r.Jc(2,"edit"),r.Sb(),r.Sb()),2&t){var n=r.ic().$implicit;r.pc("routerLink",r.tc(3,G,r.tc(1,V,n.id)))}}function Q(t,e){if(1&t){var n=r.Ub();r.Tb(0,"button",35),r.ec("click",(function(){r.zc(n);var t=r.ic().$implicit;return r.ic(3).onDelete(t.id)})),r.Tb(1,"mat-icon"),r.Jc(2,"delete"),r.Sb(),r.Sb()}}function $(t,e){if(1&t&&(r.Tb(0,"mat-cell"),r.Hc(1,K,3,5,"button",32),r.Hc(2,Q,3,0,"button",33),r.Sb()),2&t){var n=r.ic(3);r.Ab(1),r.pc("ngIf",n.permissions.can_edit),r.Ab(1),r.pc("ngIf",n.permissions.can_delete)}}function q(t,e){1&t&&r.Ob(0,"mat-header-row")}function F(t,e){1&t&&r.Ob(0,"mat-row")}function M(t,e){if(1&t){var n=r.Ub();r.Tb(0,"div"),r.Tb(1,"div",14),r.Tb(2,"div",15),r.Tb(3,"mat-form-field"),r.Tb(4,"input",16),r.ec("keyup",(function(t){return r.zc(n),r.ic(2).applyFilter(t.target.value)})),r.Sb(),r.Sb(),r.Sb(),r.Tb(5,"mat-table",17),r.Rb(6,18),r.Hc(7,C,3,0,"mat-header-cell",19),r.Hc(8,O,2,1,"mat-cell",20),r.Qb(),r.Rb(9,21),r.Hc(10,P,3,0,"mat-header-cell",19),r.Hc(11,N,2,1,"mat-cell",20),r.Qb(),r.Rb(12,22),r.Hc(13,H,3,0,"mat-header-cell",19),r.Hc(14,k,2,1,"mat-cell",20),r.Qb(),r.Rb(15,23),r.Hc(16,E,3,0,"mat-header-cell",19),r.Hc(17,J,2,1,"mat-cell",20),r.Qb(),r.Rb(18,24),r.Hc(19,U,3,0,"mat-header-cell",19),r.Hc(20,x,2,1,"mat-cell",20),r.Qb(),r.Rb(21,25),r.Hc(22,z,3,0,"mat-header-cell",19),r.Hc(23,L,2,1,"mat-cell",20),r.Qb(),r.Rb(24,26),r.Hc(25,j,3,0,"mat-header-cell",19),r.Hc(26,$,3,2,"mat-cell",20),r.Qb(),r.Hc(27,q,1,0,"mat-header-row",27),r.Hc(28,F,1,0,"mat-row",28),r.Sb(),r.Tb(29,"mat-paginator",29,30),r.ec("page",(function(t){return r.zc(n),r.ic(2).pageChanged(t)})),r.jc(31,"tableOptions"),r.Sb(),r.Sb(),r.Sb()}if(2&t){var i=r.ic(2);r.Ab(1),r.pc("hidden",!i.dataSource||0===i.dataSource.data.length),r.Ab(4),r.pc("dataSource",i.dataSource),r.Ab(22),r.pc("matHeaderRowDef",i.displayedColumns),r.Ab(1),r.pc("matRowDefColumns",i.displayedColumns),r.Ab(1),r.pc("length",i.totalRows)("pageIndex",i.currentPage)("pageSize",i.pageSize)("pageSizeOptions",r.kc(31,8,i.dataSource.data.length))}}function W(t,e){1&t&&(r.Tb(0,"div",36),r.Jc(1," Aucun cas trouv\xe9 !!! "),r.Sb())}function X(t,e){if(1&t&&(r.Tb(0,"div"),r.Hc(1,M,32,10,"div",11),r.Hc(2,W,2,0,"div",13),r.jc(3,"async"),r.Sb()),2&t){var n=r.ic();r.Ab(1),r.pc("ngIf",n.dataSource.data.length>0),r.Ab(1),r.pc("ngIf",0===n.dataSource.data.length&&!1===r.kc(3,2,n.spinner.loadingEvent$))}}var B=function(){function t(t,e,n,i,o,c,a){this.parametrageService=t,this.gestionProduitService=e,this.auth=n,this.utils=i,this.fb=o,this.modalService=c,this.cdrf=a,this.subject=new m.a(0),this.pageSize=10,this.currentPage=0,this.totalRows=0,this.permissions={can_add:!1,can_edit:!1,can_delete:!1,can_view_info:!1},this.produitUrl=h.b,this.produitId=0,this.messageAttente="",this.displayedColumns=["nom","prixUnit","poids","categorie","groupement","description","option"],this.dataSource=new b.k([])}return t.prototype.getElement=function(t){return void 0===t&&(t={page:this.currentPage,size:this.pageSize}),e=this,void 0,i=function(){var e=this;return function(t,e){var n,i,o,c,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function r(c){return function(r){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&c[0]?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,i=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(r){c=[6,r],i=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,r])}}}(this,(function(n){return this.gestionProduitService.getAllProduits(t).subscribe((function(t){var n=t.data.map((function(n){return e.totalRows=t.totalItem,{id:n.id,nom:n.nom,poids:n.poids,prixUnit:n.prixUnit,description:n.description,categorie:n.categorie,groupement:n.groupement}}),(function(t){console.log("error: ",t)}));e.dataSource.data=n,setTimeout((function(){e.paginator.length=e.totalRows})),e.dataSource._updateChangeSubscription(),e.dataSource.paginator=e.paginator,e.dataSource.sort=e.sort})),[2]}))},new((n=void 0)||(n=Promise))((function(t,o){function c(t){try{r(i.next(t))}catch(e){o(e)}}function a(t){try{r(i.throw(t))}catch(e){o(e)}}function r(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(c,a)}r((i=i.apply(e,[])).next())}));var e,n,i},t.prototype.ngAfterViewInit=function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},t.prototype.ngAfterContentChecked=function(){this.cdrf.detectChanges()},t.prototype.ngOnInit=function(){this.setPermissions(),this.getElement(),this.reinitialisationForm=this.fb.group({mode:["",[u.u.required]]})},t.prototype.onRefresh=function(){this.dataSource.data=[],this.getElement()},t.prototype.onDelete=function(t){var e=this;this.gestionProduitService.deleteProduit(t).subscribe((function(){e.utils.showNotif("Utilisateur supprim\xe9 avec succ\xe8s ","success"),e.onRefresh()}),(function(t){e.utils.showNotif("Une erreur est survenue lors de l'operation "+t,"danger")}))},t.prototype.setPermissions=function(){var t=this.auth.getPermissions();this.permissions={can_add:t.includes(d.c.CAN_ADD_PRODUIT),can_edit:t.includes(d.c.CAN_UPDATE_PRODUIT),can_delete:t.includes(d.c.CAN_DELETE_PRODUIT),can_view_info:t.includes(d.c.CAN_DELETE_PRODUIT)}},t.prototype.onCloseModal=function(){this.modalRef.close()},t.prototype.applyFilter=function(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t},t.prototype.onSearch=function(t){t&&(t.page=0,t.size=10,console.log("Params ",t),this.getElement(t))},t.prototype.pageChanged=function(t){console.log({event:t}),this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.totalRows=t.length,this.getElement({page:this.currentPage,size:this.pageSize})},t.\u0275fac=function(e){return new(e||t)(r.Nb(g.d),r.Nb(h.a),r.Nb(S.a),r.Nb(v.a),r.Nb(u.c),r.Nb(o.a),r.Nb(r.h))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-list-produit"]],viewQuery:function(t,e){var n;1&t&&(r.Nc(l.a,!0),r.Nc(p.a,!0)),2&t&&(r.wc(n=r.fc())&&(e.paginator=n.first),r.wc(n=r.fc())&&(e.sort=n.first))},decls:15,vars:3,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-8"],[1,"card-title","text-white"],[1,"nc-icon","nc-single-02"],[1,"col-sm-4","text-right","mt-2"],["mat-raised-button","","routerLink","edit","class","mr-1","color","info",4,"ngIf"],["mat-raised-button","","color","info",3,"click"],[1,"card-body"],[3,"filterBy"],[4,"ngIf"],["mat-raised-button","","routerLink","edit","color","info",1,"mr-1"],["class","text-info text-center mt-2",4,"ngIf"],[1,"table-responsive","mb-2",3,"hidden"],[1,"mat-table-header"],["matInput","","placeholder","Rechercher",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","nom"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","prixUnit"],["matColumnDef","poids"],["matColumnDef","categorie"],["matColumnDef","groupement"],["matColumnDef","description"],["matColumnDef","option"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-sort-header",""],["mat-mini-fab","","color","info",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click",4,"ngIf"],["mat-mini-fab","","color","info",3,"routerLink"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click"],[1,"text-info","text-center","mt-2"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"div",2),r.Tb(3,"div",3),r.Tb(4,"h2",4),r.Ob(5,"i",5),r.Jc(6," Liste des produits "),r.Sb(),r.Sb(),r.Tb(7,"div",6),r.Hc(8,_,3,0,"button",7),r.Tb(9,"button",8),r.ec("click",(function(){return e.onRefresh()})),r.Tb(10,"mat-icon"),r.Jc(11,"refresh"),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(12,"div",9),r.Ob(13,"app-spinner",10),r.Hc(14,X,4,4,"div",11),r.Sb(),r.Sb()),2&t&&(r.Ab(8),r.pc("ngIf",e.permissions.can_add),r.Ab(5),r.pc("filterBy",e.produitUrl),r.Ab(1),r.pc("ngIf",e.dataSource.data.length))},directives:[i.m,T.a,y.a,w.a,c.f,I.c,A.a,b.j,p.a,b.c,b.e,b.b,b.g,b.i,l.a,b.d,p.b,b.a,b.f,b.h],pipes:[i.b,R.a],styles:[""]}),function(t,e,n,i){var o,c=arguments.length,a=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(c<3?o(a):c>3?o(e,n,a):o(e,n))||a);c>3&&a&&Object.defineProperty(e,n,a)}([Object(f.a)({html:"Voulez-vous supprimer cet utilisateur ?",icon:"warning"}),D("design:type",Function),D("design:paramtypes",[Number]),D("design:returntype",void 0)],t.prototype,"onDelete",null),t}(),Y=n("S3Ys"),Z=[{path:"",component:s,children:[{path:"",redirectTo:"produits",pathMatch:"full"},{path:"produits",children:[{path:"",component:B,canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_PRODUIT_LIST}},{path:"edit",component:Y.a,canActivate:[a.a],data:{permissions:d.c.CAN_ADD_PRODUIT}},{path:"info/:id",component:function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-info-produit"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Tb(0,"p"),r.Jc(1,"info-produit works!"),r.Sb())},styles:[""]}),t}(),canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_PRODUIT_INFO}}]},{path:"clients",children:[{path:"",component:function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-list-client"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Tb(0,"p"),r.Jc(1,"list-client works!"),r.Sb())},styles:[""]}),t}(),canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_CLIENT_LIST}},{path:"edit",component:Y.a,canActivate:[a.a],data:{permissions:d.c.CAN_ADD_PRODUIT}}]},{path:"statistiques",children:[{path:"",component:function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-statistique-produit"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Tb(0,"p"),r.Jc(1,"statistique-produit works!"),r.Sb())},styles:[""]}),t}(),canActivate:[a.a],data:{permissions:d.c.CAN_VIEW_STATISTIQUE_LIST}}]}]}],tt=function(){function t(){}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(Z)],c.i]}),t}(),et=n("iYTy"),nt=n("Vm88"),it=function(){function t(){}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(e){return new(e||t)},imports:[[i.c,tt,o.b,u.g,et.a,nt.a,u.s]]}),t}()}}]);