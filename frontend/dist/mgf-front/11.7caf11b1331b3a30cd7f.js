(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"V/2A":function(e,t,i){"use strict";i.r(t),i.d(t,"ParametrageModule",(function(){return be}));var n=i("ofXK"),r=i("3Pt+"),o=i("1kSV"),a=i("iYTy"),c=i("Vm88"),u=i("tyNb"),s=i("6vGg"),l=i("p+2o"),b=i("fXoL"),m=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Hb({type:e,selectors:[["app-parametrage"]],decls:2,vars:0,consts:[[1,"main-content"]],template:function(e,t){1&e&&(b.Tb(0,"div",0),b.Ob(1,"router-outlet"),b.Sb())},directives:[u.j],styles:[""]}),e}(),p=i("D7GG"),d=i("7rb6"),f=i("Edwt"),h=i("dNgK"),g=i("bTqV"),S=i("NFeN"),v=i("8THJ"),T=i("kmnG"),y=i("qFsG"),w=i("d3UM"),N=i("FKr1"),k=i("BZeA"),A=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function c(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,c)}u((n=n.apply(e,t||[])).next())}))},C=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(c){o=[6,c],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function I(e,t){if(1&e&&(b.Tb(0,"mat-option",29),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.pc("value",i.id),b.Ab(1),b.Kc(i.nom)}}function O(e,t){if(1&e&&(b.Tb(0,"mat-option",29),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.pc("value",i.id),b.Ab(1),b.Kc(i.nom)}}function J(e,t){if(1&e&&(b.Tb(0,"mat-option",29),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.pc("value",i.id),b.Ab(1),b.Kc(i.nom)}}function P(e,t){if(1&e&&(b.Tb(0,"mat-option",29),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.pc("value",i.id),b.Ab(1),b.Kc(i.nom)}}function q(e,t){if(1&e){var i=b.Ub();b.Tb(0,"div",30),b.Tb(1,"h4",31),b.Jc(2,"Quartier"),b.Sb(),b.Tb(3,"button",32),b.ec("click",(function(){return(0,t.close)("Close click")})),b.Tb(4,"span",33),b.Jc(5,"\xd7"),b.Sb(),b.Sb(),b.Sb(),b.Tb(6,"div",34),b.Tb(7,"app-quartier",35),b.ec("isDone",(function(e){return b.zc(i),b.ic().onNewQuartier(e)})),b.Sb(),b.Sb()}if(2&e){var n=b.ic();b.Ab(7),b.pc("isNew",!0)("communeId",n.communeId)}}var x=function(){function e(e,t,i,n,r,o,a,c){this.fb=e,this.route=t,this.router=i,this.parametrageService=n,this.localiteService=r,this.utils=o,this.snackBar=a,this.modalService=c,this.isNew=!0,this.groupementId=0,this.groupementUrl=f.a}return e.prototype.ngOnInit=function(){this.groupementId=this.route.snapshot.params.id,this.isNew=isNaN(this.groupementId),this.initForm(),this.onEdit(),this.loadInfos(),this.onChangeSelectLocalite()},e.prototype.initForm=function(){this.groupementForm=this.fb.group({nom:["",[r.u.required,r.u.minLength(2)]],telephone:["",[r.u.required,r.u.pattern(s.h)]],marque:["",[r.u.required,r.u.minLength(2)]],description:["",[r.u.required,r.u.minLength(4)]],region:this.fb.group({id:[null,[r.u.pattern(s.e)]]}),prefecture:this.fb.group({id:[null,[r.u.pattern(s.e)]]}),commune:this.fb.group({id:[null,[r.u.pattern(s.e)]]}),quartier:this.fb.group({id:[null,[r.u.pattern(s.e)]]})})},e.prototype.resetForm=function(){this.initForm(),this.groupementForm.markAsPristine(),this.groupementForm.markAsUntouched(),this.groupementForm.updateValueAndValidity()},e.prototype.onSubmit=function(){var e,t,i,n,r;return A(this,void 0,void 0,(function(){var o,a,c,u,s,l,b,m,p,d=this;return C(this,(function(f){switch(f.label){case 0:return this.groupementForm.invalid?[3,13]:(a=o=this.groupementForm.value,(null===(e=o.region)||void 0===e?void 0:e.id)?[4,this.localiteService.getOneRegion(null===(t=o.region)||void 0===t?void 0:t.id).toPromise()]:[3,2]);case 1:return c=f.sent(),[3,3];case 2:c=null,f.label=3;case 3:return a.region=c,u=o,(null===(i=o.prefecture)||void 0===i?void 0:i.id)?[4,this.localiteService.getOnePrefecture(o.prefecture.id).toPromise()]:[3,5];case 4:return s=f.sent(),[3,6];case 5:s=null,f.label=6;case 6:return u.prefecture=s,l=o,(null===(n=o.commune)||void 0===n?void 0:n.id)?[4,this.localiteService.getOnecommune(o.commune.id).toPromise()]:[3,8];case 7:return b=f.sent(),[3,9];case 8:b=null,f.label=9;case 9:return l.commune=b,m=o,(null===(r=o.quartier)||void 0===r?void 0:r.id)?[4,this.localiteService.getOneQuartier(o.quartier.id).toPromise()]:[3,11];case 10:return p=f.sent(),[3,12];case 11:p=null,f.label=12;case 12:m.quartier=p,(this.isNew?this.parametrageService.addGroupement(o):this.parametrageService.updateGroupement(this.groupementId,o)).subscribe((function(){d.initLoc(),d.utils.showNotif("Operation effectu\xe9e avec succ\xe8s","success"),d.isNew?d.resetForm():d.router.navigate(["parametrages/groupements"])}),(function(e){d.utils.showNotif("Une erreur est survenue lors de l'op\xe9ration ","danger")})),f.label=13;case 13:return[2]}}))}))},e.prototype.loadInfos=function(){this.regions$=this.localiteService.getRegions$(),this.prefectures$=this.localiteService.getPrefectures$(),this.communes$=this.localiteService.getCommunes$(),this.quartiers$=this.localiteService.getQuartiers$(),this.initLoc()},e.prototype.initLoc=function(){this.localiteService.subjectRegion.next(0),this.localiteService.subjectPrefecture.next(0),this.localiteService.subjectCommune.next(0),this.localiteService.subjectQuartier.next(0)},e.prototype.onChangeSelectLocalite=function(){var e=this;this.groupementForm.get("region.id").valueChanges.subscribe((function(t){e.localiteService.subjectPrefecture.next(t)})),this.groupementForm.get("prefecture.id").valueChanges.subscribe((function(t){e.localiteService.subjectCommune.next(t)})),this.groupementForm.get("commune.id").valueChanges.subscribe((function(t){e.localiteService.subjectQuartier.next(t)})),this.groupementForm.get("quartier.id").valueChanges.subscribe((function(t){e.localiteService.subjectSecteur.next(t)}))},e.prototype.mapGroupement=function(){return A(this,void 0,void 0,(function(){var e;return C(this,(function(t){switch(t.label){case 0:return[4,this.parametrageService.getOneGroupement(this.groupementId).toPromise()];case 1:return e=t.sent(),this.groupementForm.patchValue({nom:e.nom,telephone:e.telephone,marque:e.marque,description:e.description,region:e.region.id?{id:e.region.id}:{id:null},prefecture:e.prefecture.id?{id:e.prefecture.id}:{id:null},commune:e.commune.id?{id:e.commune.id}:{id:null},quartier:e.quartier.id?{id:e.quartier.id}:{id:null}}),[2]}}))}))},e.prototype.onEdit=function(){!this.isNew&&this.groupementId>0&&this.mapGroupement()},e.prototype.onNewQuartier=function(e){e.done&&(this.localiteService.subjectQuartier.next(this.communeId),this.groupementForm.get("quartier.id").setValue(e.id),this.modalReference.close())},e.prototype.onOpenModal=function(e,t){if(void 0===t&&(t=!1),t){if(this.quartierId=this.groupementForm.get("quartier.id").value,!this.quartierId)return void this.snackBar.open("Selectionnez un quartier","",{duration:3e3,verticalPosition:"top",horizontalPosition:"right",panelClass:["my-snack-warning"]})}else if(this.communeId=this.groupementForm.get("commune.id").value,!this.communeId)return void this.snackBar.open("Selectionnez une commune ou sous-prefecture","",{duration:3e3,verticalPosition:"top",horizontalPosition:"right",panelClass:["my-snack-warning"]});this.modalReference=this.modalService.open(e,{backdrop:"static",centered:!0})},e.\u0275fac=function(t){return new(t||e)(b.Nb(r.c),b.Nb(u.a),b.Nb(u.e),b.Nb(f.b),b.Nb(d.a),b.Nb(p.a),b.Nb(h.a),b.Nb(o.a))},e.\u0275cmp=b.Hb({type:e,selectors:[["app-edit-groupement"]],decls:105,vars:23,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-12","form-inline"],["mat-mini-fab","","color","info","routerLink",".."],[1,"card-title","ml-1","text-white"],[1,"card-body"],[3,"filterBy","diameter"],["usrSpinner",""],[1,"col-md-8","offset-md-2","col-sm-6"],[3,"formGroup"],[1,"col-12"],["matInput","","type","text","formControlName","nom"],["matInput","","type","number","minlength","1","formControlName","telephone"],["matInput","","type","marque","formControlName","marque"],["matInput","","formControlName","description"],[1,"fieldset-border"],["formGroupName","region"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","prefecture"],["formGroupName","commune"],["formGroupName","quartier"],[1,"col-10"],[1,"col-2","form-inline"],["type","button","mat-mini-fab","","color","info",3,"click"],[1,"text-center"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],["contentQuartier",""],[3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"isNew","communeId","isDone"]],template:function(e,t){if(1&e){var i=b.Ub();b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"button",4),b.Tb(5,"mat-icon"),b.Jc(6,"reply"),b.Sb(),b.Sb(),b.Tb(7,"h2",5),b.Jc(8),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(9,"div",6),b.Ob(10,"app-spinner",7,8),b.Tb(12,"div",2),b.Tb(13,"div",9),b.Tb(14,"div"),b.Tb(15,"form",10),b.Tb(16,"div",2),b.Tb(17,"div",11),b.Tb(18,"mat-form-field"),b.Tb(19,"mat-label"),b.Jc(20,"Nom du groupement *"),b.Sb(),b.Ob(21,"input",12),b.Tb(22,"mat-error"),b.Jc(23,"Le nom est obligatoire et contient au moins 2 caract\xe8res"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(24,"div",2),b.Tb(25,"div",11),b.Tb(26,"mat-form-field"),b.Tb(27,"mat-label"),b.Jc(28,"T\xe9l\xe9phone *"),b.Sb(),b.Ob(29,"input",13),b.Tb(30,"mat-error"),b.Jc(31,"le numero de t\xe9l\xe9phone est incorrect et obligatoire"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(32,"div",2),b.Tb(33,"div",11),b.Tb(34,"mat-form-field"),b.Tb(35,"mat-label"),b.Jc(36,"Marque *"),b.Sb(),b.Ob(37,"input",14),b.Tb(38,"mat-error"),b.Jc(39,"La marque est obligatoire et contient au moins 2 caract\xe8res"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(40,"div",2),b.Tb(41,"div",11),b.Tb(42,"mat-form-field"),b.Tb(43,"mat-label"),b.Jc(44,"Description *"),b.Sb(),b.Ob(45,"textarea",15),b.Tb(46,"mat-error"),b.Jc(47,"La desc est obligatoire et contient au moins 3 caract\xe8res"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(48,"fieldset",16),b.Tb(49,"legend",16),b.Jc(50,"Localit\xe9"),b.Sb(),b.Tb(51,"div"),b.Tb(52,"div",17),b.Tb(53,"div",2),b.Tb(54,"div",11),b.Tb(55,"mat-form-field"),b.Tb(56,"mat-label"),b.Jc(57,"Region"),b.Sb(),b.Tb(58,"mat-select",18),b.Hc(59,I,2,2,"mat-option",19),b.jc(60,"async"),b.Sb(),b.Tb(61,"mat-error"),b.Jc(62,"La region est obligatoire"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(63,"div",20),b.Tb(64,"div",2),b.Tb(65,"div",11),b.Tb(66,"mat-form-field"),b.Tb(67,"mat-label"),b.Jc(68,"Prefecture"),b.Sb(),b.Tb(69,"mat-select",18),b.Hc(70,O,2,2,"mat-option",19),b.jc(71,"async"),b.Sb(),b.Tb(72,"mat-error"),b.Jc(73,"La prefecture est obligatoire"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(74,"div",21),b.Tb(75,"div",2),b.Tb(76,"div",11),b.Tb(77,"mat-form-field"),b.Tb(78,"mat-label"),b.Jc(79,"Commune/Sous-prefecture"),b.Sb(),b.Tb(80,"mat-select",18),b.Hc(81,J,2,2,"mat-option",19),b.jc(82,"async"),b.Sb(),b.Tb(83,"mat-error"),b.Jc(84,"La commune ou sous-prefecture est obligatoire"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(85,"div",22),b.Tb(86,"div",2),b.Tb(87,"div",23),b.Tb(88,"mat-form-field"),b.Tb(89,"mat-label"),b.Jc(90,"Villages"),b.Sb(),b.Tb(91,"mat-select",18),b.Hc(92,P,2,2,"mat-option",19),b.jc(93,"async"),b.Sb(),b.Sb(),b.Sb(),b.Tb(94,"div",24),b.Tb(95,"button",25),b.ec("click",(function(){b.zc(i);var e=b.xc(104);return t.onOpenModal(e)})),b.Tb(96,"mat-icon"),b.Jc(97,"add"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(98,"div",26),b.Tb(99,"button",27),b.ec("click",(function(){return t.onSubmit()})),b.jc(100,"async"),b.jc(101,"async"),b.Jc(102," Enregistrer "),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Hc(103,q,8,2,"ng-template",null,28,b.Ic)}if(2&e){var n=b.xc(11);b.Ab(8),b.Lc(" ",t.isNew?" Enregistrement d'un groupement":"Modification d'un groupement"," "),b.Ab(2),b.pc("filterBy",t.groupementUrl)("diameter",30),b.Ab(5),b.pc("formGroup",t.groupementForm),b.Ab(44),b.pc("ngForOf",b.kc(60,11,t.regions$)),b.Ab(11),b.pc("ngForOf",b.kc(71,13,t.prefectures$)),b.Ab(11),b.pc("ngForOf",b.kc(82,15,t.communes$)),b.Ab(11),b.pc("ngForOf",b.kc(93,17,t.quartiers$)),b.Ab(7),b.Fb("spinner",b.kc(100,19,n.loadingEvent$)),b.pc("disabled",t.groupementForm.invalid||b.kc(101,21,n.loadingEvent$))}},directives:[g.a,u.f,S.a,v.a,r.w,r.m,r.e,T.c,T.f,y.a,r.b,r.l,r.d,T.b,r.q,r.h,r.f,w.a,n.l,N.j,k.a],pipes:[n.b],styles:['.mat-form-field[_ngcontent-%COMP%]{font-size:17px;width:100%}@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}']}),e}(),E=i("M9IT"),R=i("Dh3D"),F=i("+0xr"),H=i("d414"),L=i("2Vo4"),D=i("9qFf"),_=i("0Sq8"),G=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function j(e,t){1&e&&(b.Tb(0,"button",12),b.Tb(1,"mat-icon"),b.Jc(2,"add"),b.Sb(),b.Sb())}function $(e,t){1&e&&(b.Tb(0,"mat-header-cell",30),b.Tb(1,"strong"),b.Jc(2,"GROUPEMENT"),b.Sb(),b.Sb())}function z(e,t){if(1&e&&(b.Tb(0,"mat-cell"),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.Ab(1),b.Kc(i.nom)}}function M(e,t){1&e&&(b.Tb(0,"mat-header-cell",30),b.Tb(1,"strong"),b.Jc(2,"TELEPHONE"),b.Sb(),b.Sb())}function U(e,t){if(1&e&&(b.Tb(0,"mat-cell"),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.Ab(1),b.Kc(i.telephone)}}function Q(e,t){1&e&&(b.Tb(0,"mat-header-cell",30),b.Tb(1,"strong"),b.Jc(2,"MARQUE"),b.Sb(),b.Sb())}function K(e,t){if(1&e&&(b.Tb(0,"mat-cell"),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.Ab(1),b.Kc(i.marque)}}function V(e,t){1&e&&(b.Tb(0,"mat-header-cell",30),b.Tb(1,"strong"),b.Jc(2,"DESCRIPTION"),b.Sb(),b.Sb())}function B(e,t){if(1&e&&(b.Tb(0,"mat-cell"),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.Ab(1),b.Kc(i.description)}}function X(e,t){1&e&&(b.Tb(0,"mat-header-cell",30),b.Tb(1,"strong"),b.Jc(2,"VILLAGES"),b.Sb(),b.Sb())}function W(e,t){if(1&e&&(b.Tb(0,"mat-cell"),b.Jc(1),b.Sb()),2&e){var i=t.$implicit;b.Ab(1),b.Kc(null==i.quartier?null:i.quartier.nom)}}function Y(e,t){1&e&&(b.Tb(0,"mat-header-cell",30),b.Tb(1,"strong"),b.Jc(2,"OPTIONS"),b.Sb(),b.Sb())}var Z=function(e){return{id:e}},ee=function(e){return["edit",e]};function te(e,t){if(1&e&&(b.Tb(0,"button",33),b.Tb(1,"mat-icon"),b.Jc(2,"edit"),b.Sb(),b.Sb()),2&e){var i=b.ic().$implicit;b.pc("routerLink",b.tc(3,ee,b.tc(1,Z,i.id)))}}function ie(e,t){if(1&e){var i=b.Ub();b.Tb(0,"button",34),b.ec("click",(function(){b.zc(i);var e=b.ic().$implicit;return b.ic(3).onDelete(e.id)})),b.Tb(1,"mat-icon"),b.Jc(2,"delete"),b.Sb(),b.Sb()}}function ne(e,t){if(1&e&&(b.Tb(0,"mat-cell"),b.Hc(1,te,3,5,"button",31),b.Hc(2,ie,3,0,"button",32),b.Sb()),2&e){var i=b.ic(3);b.Ab(1),b.pc("ngIf",i.permissions.can_edit),b.Ab(1),b.pc("ngIf",i.permissions.can_delete)}}function re(e,t){1&e&&b.Ob(0,"mat-header-row")}function oe(e,t){1&e&&b.Ob(0,"mat-row")}function ae(e,t){if(1&e){var i=b.Ub();b.Tb(0,"div"),b.Tb(1,"div",14),b.Tb(2,"div",15),b.Tb(3,"mat-form-field"),b.Tb(4,"input",16),b.ec("keyup",(function(e){return b.zc(i),b.ic(2).applyFilter(e.target.value)})),b.Sb(),b.Sb(),b.Sb(),b.Tb(5,"mat-table",17),b.Rb(6,18),b.Hc(7,$,3,0,"mat-header-cell",19),b.Hc(8,z,2,1,"mat-cell",20),b.Qb(),b.Rb(9,21),b.Hc(10,M,3,0,"mat-header-cell",19),b.Hc(11,U,2,1,"mat-cell",20),b.Qb(),b.Rb(12,22),b.Hc(13,Q,3,0,"mat-header-cell",19),b.Hc(14,K,2,1,"mat-cell",20),b.Qb(),b.Rb(15,23),b.Hc(16,V,3,0,"mat-header-cell",19),b.Hc(17,B,2,1,"mat-cell",20),b.Qb(),b.Rb(18,24),b.Hc(19,X,3,0,"mat-header-cell",19),b.Hc(20,W,2,1,"mat-cell",20),b.Qb(),b.Rb(21,25),b.Hc(22,Y,3,0,"mat-header-cell",19),b.Hc(23,ne,3,2,"mat-cell",20),b.Qb(),b.Hc(24,re,1,0,"mat-header-row",26),b.Hc(25,oe,1,0,"mat-row",27),b.Sb(),b.Tb(26,"mat-paginator",28,29),b.ec("page",(function(e){return b.zc(i),b.ic(2).pageChanged(e)})),b.jc(28,"tableOptions"),b.Sb(),b.Sb(),b.Sb()}if(2&e){var n=b.ic(2);b.Ab(1),b.pc("hidden",!n.dataSource||0===n.dataSource.data.length),b.Ab(4),b.pc("dataSource",n.dataSource),b.Ab(19),b.pc("matHeaderRowDef",n.displayedColumns),b.Ab(1),b.pc("matRowDefColumns",n.displayedColumns),b.Ab(1),b.pc("length",n.totalRows)("pageIndex",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",b.kc(28,8,n.dataSource.data.length))}}function ce(e,t){1&e&&(b.Tb(0,"div",35),b.Jc(1," Aucun cas trouv\xe9 !!! "),b.Sb())}function ue(e,t){if(1&e&&(b.Tb(0,"div"),b.Hc(1,ae,29,10,"div",11),b.Hc(2,ce,2,0,"div",13),b.jc(3,"async"),b.Sb()),2&e){var i=b.ic();b.Ab(1),b.pc("ngIf",i.dataSource.data.length>0),b.Ab(1),b.pc("ngIf",0===i.dataSource.data.length&&!1===b.kc(3,2,i.spinner.loadingEvent$))}}var se=[{path:"",component:m,children:[{path:"",redirectTo:"groupements",pathMatch:"full"},{path:"groupements",children:[{path:"",component:function(){function e(e,t,i,n,r){this.parametrageService=e,this.auth=t,this.utils=i,this.fb=n,this.cdrf=r,this.subject=new L.a(0),this.pageSize=10,this.currentPage=0,this.totalRows=0,this.permissions={can_add:!1,can_edit:!1,can_delete:!1,can_view_info:!1},this.groupementUrl=f.a,this.groupementId=0,this.messageAttente="",this.displayedColumns=["nom","telephone","marque","description","quartier","option"],this.dataSource=new F.k([])}return e.prototype.getElement=function(e){return void 0===e&&(e={page:this.currentPage,size:this.pageSize}),t=this,void 0,n=function(){var t=this;return function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(c){o=[6,c],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(i){return this.parametrageService.getAllGroupements(e).subscribe((function(e){var i=e.data.map((function(i){return t.totalRows=e.totalItem,{id:i.id,nom:i.nom,marque:i.marque,telephone:i.telephone,description:i.description,region:i.region,prefecture:i.prefecture,commune:i.commune,quartier:i.quartier}}),(function(e){console.log("error: ",e)}));t.dataSource.data=i,t.dataSource._updateChangeSubscription(),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort})),[2]}))},new((i=void 0)||(i=Promise))((function(e,r){function o(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,a)}c((n=n.apply(t,[])).next())}));var t,i,n},e.prototype.ngAfterViewInit=function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},e.prototype.ngAfterContentChecked=function(){this.cdrf.detectChanges()},e.prototype.ngOnInit=function(){this.setPermissions(),this.getElement()},e.prototype.onRefresh=function(){this.dataSource.data=[],this.getElement()},e.prototype.onDelete=function(e){var t=this;this.parametrageService.deleteGroupement(e).subscribe((function(){t.utils.showNotif("Groupement supprim\xe9 avec succ\xe8s ","success"),t.onRefresh()}),(function(e){t.utils.showNotif("Une erreur est survenue lors de l'operation "+e,"danger")}))},e.prototype.setPermissions=function(){var e=this.auth.getPermissions();this.permissions={can_add:e.includes(s.c.CAN_ADD_GROUPEMENT),can_edit:e.includes(s.c.CAN_UPDATE_GROUPEMENT),can_delete:e.includes(s.c.CAN_DELETE_GROUPEMENT),can_view_info:e.includes(s.c.CAN_DELETE_GROUPEMENT)}},e.prototype.onCloseModal=function(){this.modalRef.close()},e.prototype.applyFilter=function(e){e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e},e.prototype.onSearch=function(e){e&&(e.page=0,e.size=10,console.log("Params ",e),this.getElement(e))},e.prototype.pageChanged=function(e){console.log({event:e}),this.pageSize=e.pageSize,this.currentPage=e.pageIndex,this.totalRows=e.length,this.getElement({page:this.currentPage,size:this.pageSize})},e.\u0275fac=function(t){return new(t||e)(b.Nb(f.b),b.Nb(D.a),b.Nb(p.a),b.Nb(r.c),b.Nb(b.h))},e.\u0275cmp=b.Hb({type:e,selectors:[["app-list-groupement"]],viewQuery:function(e,t){var i;1&e&&(b.Nc(E.a,!0),b.Nc(R.a,!0)),2&e&&(b.wc(i=b.fc())&&(t.paginator=i.first),b.wc(i=b.fc())&&(t.sort=i.first))},decls:15,vars:3,consts:[[1,"card"],[1,"card-header","bg-default"],[1,"row"],[1,"col-sm-8"],[1,"card-title","text-white"],[1,"nc-icon","nc-single-02"],[1,"col-sm-4","text-right","mt-2"],["mat-raised-button","","routerLink","edit","class","mr-1","color","info",4,"ngIf"],["mat-raised-button","","color","info",3,"click"],[1,"card-body"],[3,"filterBy"],[4,"ngIf"],["mat-raised-button","","routerLink","edit","color","info",1,"mr-1"],["class","text-info text-center mt-2",4,"ngIf"],[1,"table-responsive","mb-2",3,"hidden"],[1,"mat-table-header"],["matInput","","placeholder","Rechercher",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","nom"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","telephone"],["matColumnDef","marque"],["matColumnDef","description"],["matColumnDef","quartier"],["matColumnDef","option"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["mat-sort-header",""],["mat-mini-fab","","color","info",3,"routerLink",4,"ngIf"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click",4,"ngIf"],["mat-mini-fab","","color","info",3,"routerLink"],["mat-mini-fab","","color","accent","aria-label","Supprimer","title","Supprimer",3,"click"],[1,"text-info","text-center","mt-2"]],template:function(e,t){1&e&&(b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"h2",4),b.Ob(5,"i",5),b.Jc(6," Liste des Groupements "),b.Sb(),b.Sb(),b.Tb(7,"div",6),b.Hc(8,j,3,0,"button",7),b.Tb(9,"button",8),b.ec("click",(function(){return t.onRefresh()})),b.Tb(10,"mat-icon"),b.Jc(11,"refresh"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(12,"div",9),b.Ob(13,"app-spinner",10),b.Hc(14,ue,4,4,"div",11),b.Sb(),b.Sb()),2&e&&(b.Ab(8),b.pc("ngIf",t.permissions.can_add),b.Ab(5),b.pc("filterBy",t.groupementUrl),b.Ab(1),b.pc("ngIf",t.dataSource.data.length))},directives:[n.m,g.a,S.a,v.a,u.f,T.c,y.a,F.j,R.a,F.c,F.e,F.b,F.g,F.i,E.a,F.d,R.b,F.a,F.f,F.h],pipes:[n.b,_.a],styles:[""]}),function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);o>3&&a&&Object.defineProperty(t,i,a)}([Object(H.a)({html:"Voulez-vous supprimer cet utilisateur ?",icon:"warning"}),G("design:type",Function),G("design:paramtypes",[Number]),G("design:returntype",void 0)],e.prototype,"onDelete",null),e}(),canActivate:[l.a],data:{permissions:s.c.CAN_VIEW_GROUPEMENT_LIST}},{path:"edit",component:x,canActivate:[l.a],data:{permissions:s.c.CAN_ADD_GROUPEMENT}}]}]}],le=function(){function e(){}return e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({factory:function(t){return new(t||e)},imports:[[u.i.forChild(se)],u.i]}),e}(),be=function(){function e(){}return e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({factory:function(t){return new(t||e)},imports:[[n.c,le,r.s,c.a,a.a,r.g,o.b]]}),e}()}}]);