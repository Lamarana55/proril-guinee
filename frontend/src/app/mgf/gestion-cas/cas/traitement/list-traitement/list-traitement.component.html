<app-spinner [filterBy]="traimentUrl" [diameter]="30" #trSpinner></app-spinner>

<div [hidden]="!dataSource || dataSource.data.length == 0">
    <div class="mat-table-container mat-elevation-z0 table-responsive-sm">
      <mat-table [dataSource]="dataSource">
        <!-- date Column -->
        <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef>Date</mat-header-cell>
            <mat-cell *matCellDef="let row">{{ row.date | date : 'dd/MM/yyyy HH:mm:ss' }}</mat-cell>
          </ng-container>
        <!-- statut Column -->
        <ng-container matColumnDef="statut">
          <mat-header-cell *matHeaderCellDef>Statut</mat-header-cell>
          <mat-cell *matCellDef="let row">
              <button type="button" mat-button [color]="row.statut | statusCasFormat: true">
                {{ row.statut | statusCasFormat }}
              </button>
          </mat-cell>
        </ng-container>
        <!-- description Column -->
        <ng-container matColumnDef="description">
          <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
          <mat-cell *matCellDef="let row">{{ row.description }}</mat-cell>
        </ng-container>
        <!-- username Column -->
        <ng-container matColumnDef="username">
            <mat-header-cell *matHeaderCellDef>Validateur</mat-header-cell>
            <mat-cell *matCellDef="let row"><a [routerLink]="['/users/info', row.userId]">{{ row.username }}</a></mat-cell>
        </ng-container>
        <!-- Action Column -->
        <ng-container matColumnDef="action">
          <mat-header-cell *matHeaderCellDef> ACTION </mat-header-cell>
          <mat-cell  *matCellDef="let row">
            <button *ngIf="permissions.can_delete" mat-mini-fab color="accent" (click)="onDelete(row.id)" aria-label="Supprimer" title="Supprimer">
              <mat-icon>delete</mat-icon>
            </button>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>
      <mat-paginator [pageSize]="5" [pageSizeOptions]="dataSource.data.length | tableOptions"></mat-paginator>
    </div>
  </div>
  <div *ngIf="dataSource && dataSource.data.length == 0 && ((trSpinner.loadingEvent$ | async) === false)" 
    class="text-info text-center mt-2">
    Aucun traitement trouv√© !!!
  </div>
