<div class="card">
    <div class="card-header bg-default">
      <div class="row">
        <div class="col-sm-12 form-inline">
          <button type="button" mat-mini-fab color="info" [routerLink]="returnUrl">
            <mat-icon>reply</mat-icon>
          </button>
          <h2 class="card-title ml-1 text-white">
            Services - {{ isNew ? 'Enregistrement' : 'Modification' }}
          </h2>
        </div>
      </div>
    </div>
    <div class="card-body">
      <!-- Spinner -->
      <app-spinner [filterBy]="serviceUrl" [diameter]="30" #svSpinner></app-spinner>

      <div class="row">
        <div class="col-md-8 offset-md-2">
            <form [formGroup]="questionForm">
                <div class="row">
                    <div class="col-12">
                      <mat-form-field>
                        <mat-label>Type de cas</mat-label>
                        <mat-select formControlName="typeCas">
                            <mat-option [value]="null">Tout</mat-option>
                            <mat-option *ngFor="let tc of typeCas$ | async" [value]="tc.id">{{ tc.libelle }}</mat-option>
                        </mat-select>
                        <mat-error>Le type de cas est obligatoire</mat-error>
                      </mat-form-field>
                    </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <mat-form-field>
                      <mat-label>Service (Question)</mat-label>
                      <input type="text" matInput formControlName="libelle">
                      <mat-error>Champs obligatoire</mat-error>
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                    <div class="col-12">
                      <mat-form-field>
                        <mat-label>Parent</mat-label>
                        <mat-select formControlName="idParent">
                            <mat-option [value]="null">(Aucun)</mat-option>
                            <mat-option *ngFor="let qt of parents$ | async" [value]="qt.id">{{ qt.libelle }}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                </div>
                <div class="row" [hidden]="!isParent">
                    <div class="col-12">
                        <fieldset class="fieldset-border">
                            <legend class="fieldset-border">Statut Parent</legend>
                            <mat-radio-group aria-label="Select an option" formControlName="statutParent">
                                <mat-radio-button [value]="true">OUI</mat-radio-button>
                                <mat-radio-button [value]="false">NON</mat-radio-button>
                            </mat-radio-group>
                        </fieldset>
                    </div>
                </div>
                <div class="row">
                  <div class="col-12">
                    <mat-form-field>
                      <mat-label>Description</mat-label>
                      <textarea matInput formControlName="description"></textarea>
                    </mat-form-field>
                  </div>
                </div>
            
                <div class="text-center">
                  <button type="button" 
                  [class.spinner]="svSpinner.loadingEvent$ | async" mat-raised-button color="primary" 
                  [disabled]="questionForm.invalid || (svSpinner.loadingEvent$ | async)" (click)="onSubmit()">
                    Enregistrer
                  </button>
                </div>
              </form>
        </div>
      </div>
    </div>
</div>
